!function(e){e.ui=e.ui||{};var t=(e.ui.version="1.12.1",0),n=Array.prototype.slice;e.cleanData=function(t){return function(n){var i,r,o;for(o=0;null!=(r=n[o]);o++)try{i=e._data(r,"events"),i&&i.remove&&e(r).triggerHandler("remove")}catch(s){}t(n)}}(e.cleanData),e.widget=function(t,n,i){var r,o,s,a={},l=t.split(".")[0];t=t.split(".")[1];var d=l+"-"+t;return i||(i=n,n=e.Widget),e.isArray(i)&&(i=e.extend.apply(null,[{}].concat(i))),e.expr[":"][d.toLowerCase()]=function(t){return!!e.data(t,d)},e[l]=e[l]||{},r=e[l][t],o=e[l][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new o(e,t)},e.extend(o,r,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),s=new n,s.options=e.widget.extend({},s.options),e.each(i,function(t,i){return e.isFunction(i)?void(a[t]=function(){function e(){return n.prototype[t].apply(this,arguments)}function r(e){return n.prototype[t].apply(this,e)}return function(){var t,n=this._super,o=this._superApply;return this._super=e,this._superApply=r,t=i.apply(this,arguments),this._super=n,this._superApply=o,t}}()):void(a[t]=i)}),o.prototype=e.widget.extend(s,{widgetEventPrefix:r?s.widgetEventPrefix||t:t},a,{constructor:o,namespace:l,widgetName:t,widgetFullName:d}),r?(e.each(r._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,o,n._proto)}),delete r._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var i,r,o=n.call(arguments,1),s=0,a=o.length;a>s;s++)for(i in o[s])r=o[s][i],o[s].hasOwnProperty(i)&&void 0!==r&&(e.isPlainObject(r)?t[i]=e.isPlainObject(t[i])?e.widget.extend({},t[i],r):e.widget.extend({},r):t[i]=r);return t},e.widget.bridge=function(t,i){var r=i.prototype.widgetFullName||t;e.fn[t]=function(o){var s="string"==typeof o,a=n.call(arguments,1),l=this;return s?this.length||"instance"!==o?this.each(function(){var n,i=e.data(this,r);return"instance"===o?(l=i,!1):i?e.isFunction(i[o])&&"_"!==o.charAt(0)?(n=i[o].apply(i,a),n!==i&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+o+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+o+"'")}):l=void 0:(a.length&&(o=e.widget.extend.apply(null,[o].concat(a))),this.each(function(){var t=e.data(this,r);t?(t.option(o||{}),t._init&&t._init()):e.data(this,r,new i(o,this))})),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(n,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),n),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,function(e,n){t._removeClass(n,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var i,r,o,s=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(s={},i=t.split("."),t=i.shift(),i.length){for(r=s[t]=e.widget.extend({},this.options[t]),o=0;o<i.length-1;o++)r[i[o]]=r[i[o]]||{},r=r[i[o]];if(t=i.pop(),1===arguments.length)return void 0===r[t]?null:r[t];r[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];s[t]=n}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var n,i,r;for(n in t)r=this.classesElementLookup[n],t[n]!==this.options.classes[n]&&r&&r.length&&(i=e(r.get()),this._removeClass(r,n),i.addClass(this._classes({element:i,keys:n,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){function n(n,o){var s,a;for(a=0;a<n.length;a++)s=r.classesElementLookup[n[a]]||e(),s=e(t.add?e.unique(s.get().concat(t.element.get())):s.not(t.element).get()),r.classesElementLookup[n[a]]=s,i.push(n[a]),o&&t.classes[n[a]]&&i.push(t.classes[n[a]])}var i=[],r=this;return t=e.extend({element:this.element,classes:this.options.classes||{}},t),this._on(t.element,{remove:"_untrackClassesElement"}),t.keys&&n(t.keys.match(/\S+/g)||[],!0),t.extra&&n(t.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(t){var n=this;e.each(n.classesElementLookup,function(i,r){-1!==e.inArray(t.target,r)&&(n.classesElementLookup[i]=e(r.not(t.target).get()))})},_removeClass:function(e,t,n){return this._toggleClass(e,t,n,!1)},_addClass:function(e,t,n){return this._toggleClass(e,t,n,!0)},_toggleClass:function(e,t,n,i){i="boolean"==typeof i?i:n;var r="string"==typeof e||null===e,o={extra:r?t:n,keys:r?e:t,element:r?this.element:e,add:i};return o.element.toggleClass(this._classes(o),i),this},_on:function(t,n,i){var r,o=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=r=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),e.each(i,function(i,s){function a(){return t||o.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof s?o[s]:s).apply(o,arguments):void 0}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||e.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),d=l[1]+o.eventNamespace,c=l[2];c?r.on(d,c,a):n.on(d,a)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(n).off(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,n,i){var r,o,s=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(e.isFunction(s)&&s.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,r,o){"string"==typeof r&&(r={effect:r});var s,a=r?r===!0||"number"==typeof r?n:r.effect||n:t;r=r||{},"number"==typeof r&&(r={duration:r}),s=!e.isEmptyObject(r),r.complete=o,r.delay&&i.delay(r.delay),s&&e.effects&&e.effects.effect[a]?i[t](r):a!==t&&i[a]?i[a](r.duration,r.easing,o):i.queue(function(n){e(this)[t](),o&&o.call(i[0]),n()})}});e.widget;!function(){function t(e,t,n){return[parseFloat(e[0])*(u.test(e[0])?t/100:1),parseFloat(e[1])*(u.test(e[1])?n/100:1)]}function n(t,n){return parseInt(e.css(t,n),10)||0}function i(t){var n=t[0];return 9===n.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}var r,o=Math.max,s=Math.abs,a=/left|center|right/,l=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,u=/%$/,h=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==r)return r;var t,n,i=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=i.children()[0];return e("body").append(i),t=o.offsetWidth,i.css("overflow","scroll"),n=o.offsetWidth,t===n&&(n=i[0].clientWidth),i.remove(),r=t-n},getScrollInfo:function(t){var n=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),i=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),r="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth,o="scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight;return{width:o?e.position.scrollbarWidth():0,height:r?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),i=e.isWindow(n[0]),r=!!n[0]&&9===n[0].nodeType,o=!i&&!r;return{element:n,isWindow:i,isDocument:r,offset:o?e(t).offset():{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:n.outerWidth(),height:n.outerHeight()}}},e.fn.position=function(r){if(!r||!r.of)return h.apply(this,arguments);r=e.extend({},r);var u,f,p,g,y,v,m=e(r.of),b=e.position.getWithinInfo(r.within),x=e.position.getScrollInfo(b),C=(r.collision||"flip").split(" "),_={};return v=i(m),m[0].preventDefault&&(r.at="left top"),f=v.width,p=v.height,g=v.offset,y=e.extend({},g),e.each(["my","at"],function(){var e,t,n=(r[this]||"").split(" ");1===n.length&&(n=a.test(n[0])?n.concat(["center"]):l.test(n[0])?["center"].concat(n):["center","center"]),n[0]=a.test(n[0])?n[0]:"center",n[1]=l.test(n[1])?n[1]:"center",e=d.exec(n[0]),t=d.exec(n[1]),_[this]=[e?e[0]:0,t?t[0]:0],r[this]=[c.exec(n[0])[0],c.exec(n[1])[0]]}),1===C.length&&(C[1]=C[0]),"right"===r.at[0]?y.left+=f:"center"===r.at[0]&&(y.left+=f/2),"bottom"===r.at[1]?y.top+=p:"center"===r.at[1]&&(y.top+=p/2),u=t(_.at,f,p),y.left+=u[0],y.top+=u[1],this.each(function(){var i,a,l=e(this),d=l.outerWidth(),c=l.outerHeight(),h=n(this,"marginLeft"),v=n(this,"marginTop"),k=d+h+n(this,"marginRight")+x.width,w=c+v+n(this,"marginBottom")+x.height,N=e.extend({},y),S=t(_.my,l.outerWidth(),l.outerHeight());"right"===r.my[0]?N.left-=d:"center"===r.my[0]&&(N.left-=d/2),"bottom"===r.my[1]?N.top-=c:"center"===r.my[1]&&(N.top-=c/2),N.left+=S[0],N.top+=S[1],i={marginLeft:h,marginTop:v},e.each(["left","top"],function(t,n){e.ui.position[C[t]]&&e.ui.position[C[t]][n](N,{targetWidth:f,targetHeight:p,elemWidth:d,elemHeight:c,collisionPosition:i,collisionWidth:k,collisionHeight:w,offset:[u[0]+S[0],u[1]+S[1]],my:r.my,at:r.at,within:b,elem:l})}),r.using&&(a=function(e){var t=g.left-N.left,n=t+f-d,i=g.top-N.top,a=i+p-c,u={target:{element:m,left:g.left,top:g.top,width:f,height:p},element:{element:l,left:N.left,top:N.top,width:d,height:c},horizontal:0>n?"left":t>0?"right":"center",vertical:0>a?"top":i>0?"bottom":"middle"};d>f&&s(t+n)<f&&(u.horizontal="center"),c>p&&s(i+a)<p&&(u.vertical="middle"),o(s(t),s(n))>o(s(i),s(a))?u.important="horizontal":u.important="vertical",r.using.call(this,e,u)}),l.offset(e.extend(N,{using:a}))})},e.ui.position={fit:{left:function(e,t){var n,i=t.within,r=i.isWindow?i.scrollLeft:i.offset.left,s=i.width,a=e.left-t.collisionPosition.marginLeft,l=r-a,d=a+t.collisionWidth-s-r;t.collisionWidth>s?l>0&&0>=d?(n=e.left+l+t.collisionWidth-s-r,e.left+=l-n):d>0&&0>=l?e.left=r:l>d?e.left=r+s-t.collisionWidth:e.left=r:l>0?e.left+=l:d>0?e.left-=d:e.left=o(e.left-a,e.left)},top:function(e,t){var n,i=t.within,r=i.isWindow?i.scrollTop:i.offset.top,s=t.within.height,a=e.top-t.collisionPosition.marginTop,l=r-a,d=a+t.collisionHeight-s-r;t.collisionHeight>s?l>0&&0>=d?(n=e.top+l+t.collisionHeight-s-r,e.top+=l-n):d>0&&0>=l?e.top=r:l>d?e.top=r+s-t.collisionHeight:e.top=r:l>0?e.top+=l:d>0?e.top-=d:e.top=o(e.top-a,e.top)}},flip:{left:function(e,t){var n,i,r=t.within,o=r.offset.left+r.scrollLeft,a=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,d=e.left-t.collisionPosition.marginLeft,c=d-l,u=d+t.collisionWidth-a-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,f="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,p=-2*t.offset[0];0>c?(n=e.left+h+f+p+t.collisionWidth-a-o,(0>n||n<s(c))&&(e.left+=h+f+p)):u>0&&(i=e.left-t.collisionPosition.marginLeft+h+f+p-l,(i>0||s(i)<u)&&(e.left+=h+f+p))},top:function(e,t){var n,i,r=t.within,o=r.offset.top+r.scrollTop,a=r.height,l=r.isWindow?r.scrollTop:r.offset.top,d=e.top-t.collisionPosition.marginTop,c=d-l,u=d+t.collisionHeight-a-l,h="top"===t.my[1],f=h?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,p="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,g=-2*t.offset[1];0>c?(i=e.top+f+p+g+t.collisionHeight-a-o,(0>i||i<s(c))&&(e.top+=f+p+g)):u>0&&(n=e.top-t.collisionPosition.marginTop+f+p+g-l,(n>0||s(n)<u)&&(e.top+=f+p+g))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}}}();var i=(e.ui.position,e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},e.fn.scrollParent=function(t){var n=this.css("position"),i="absolute"===n,r=t?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var t=e(this);return i&&"static"===t.css("position")?!1:r.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==n&&o.length?o:e(this[0].ownerDocument||document)},e.fn.extend({uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),"ui-effects-"),r="ui-effects-style",o="ui-effects-animated",s=e;e.effects={effect:{}},function(e,t){function n(e,t,n){var i=u[t.type]||{};return null==e?n||!t.def?null:t.def:(e=i.floor?~~e:parseFloat(e),isNaN(e)?t.def:i.mod?(e+i.mod)%i.mod:0>e?0:i.max<e?i.max:e)}function i(t){var n=d(),i=n._rgba=[];return t=t.toLowerCase(),p(l,function(e,r){var o,s=r.re.exec(t),a=s&&r.parse(s),l=r.space||"rgba";return a?(o=n[l](a),n[c[l].cache]=o[c[l].cache],i=n._rgba=o._rgba,!1):void 0}),i.length?("0,0,0,0"===i.join()&&e.extend(i,o.transparent),n):o[t]}function r(e,t,n){return n=(n+1)%1,1>6*n?e+(t-e)*n*6:1>2*n?t:2>3*n?e+(t-e)*(2/3-n)*6:e}var o,s="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",a=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],d=e.Color=function(t,n,i,r){return new e.Color.fn.parse(t,n,i,r)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=d.support={},f=e("<p>")[0],p=e.each;f.style.cssText="background-color:rgba(1,1,1,.5)",h.rgba=f.style.backgroundColor.indexOf("rgba")>-1,p(c,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),d.fn=e.extend(d.prototype,{parse:function(r,s,a,l){if(r===t)return this._rgba=[null,null,null,null],this;(r.jquery||r.nodeType)&&(r=e(r).css(s),s=t);var u=this,h=e.type(r),f=this._rgba=[];return s!==t&&(r=[r,s,a,l],h="array"),"string"===h?this.parse(i(r)||o._default):"array"===h?(p(c.rgba.props,function(e,t){f[t.idx]=n(r[t.idx],t)}),this):"object"===h?(r instanceof d?p(c,function(e,t){r[t.cache]&&(u[t.cache]=r[t.cache].slice())}):p(c,function(t,i){var o=i.cache;p(i.props,function(e,t){if(!u[o]&&i.to){if("alpha"===e||null==r[e])return;u[o]=i.to(u._rgba)}u[o][t.idx]=n(r[e],t,!0)}),u[o]&&e.inArray(null,u[o].slice(0,3))<0&&(u[o][3]=1,i.from&&(u._rgba=i.from(u[o])))}),this):void 0},is:function(e){var t=d(e),n=!0,i=this;return p(c,function(e,r){var o,s=t[r.cache];return s&&(o=i[r.cache]||r.to&&r.to(i._rgba)||[],p(r.props,function(e,t){return null!=s[t.idx]?n=s[t.idx]===o[t.idx]:void 0})),n}),n},_space:function(){var e=[],t=this;return p(c,function(n,i){t[i.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var i=d(e),r=i._space(),o=c[r],s=0===this.alpha()?d("transparent"):this,a=s[o.cache]||o.to(s._rgba),l=a.slice();return i=i[o.cache],p(o.props,function(e,r){var o=r.idx,s=a[o],d=i[o],c=u[r.type]||{};null!==d&&(null===s?l[o]=d:(c.mod&&(d-s>c.mod/2?s+=c.mod:s-d>c.mod/2&&(s-=c.mod)),l[o]=n((d-s)*t+s,r)))}),this[r](l)},blend:function(t){if(1===this._rgba[3])return this;var n=this._rgba.slice(),i=n.pop(),r=d(t)._rgba;return d(e.map(n,function(e,t){return(1-i)*r[t]+i*e}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===n[3]&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===n[3]&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),i=n.pop();return t&&n.push(~~(255*i)),"#"+e.map(n,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),d.fn.parse.prototype=d.fn,c.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,n,i=e[0]/255,r=e[1]/255,o=e[2]/255,s=e[3],a=Math.max(i,r,o),l=Math.min(i,r,o),d=a-l,c=a+l,u=.5*c;return t=l===a?0:i===a?60*(r-o)/d+360:r===a?60*(o-i)/d+120:60*(i-r)/d+240,n=0===d?0:.5>=u?d/c:d/(2-c),[Math.round(t)%360,n,u,null==s?1:s]},c.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,n=e[1],i=e[2],o=e[3],s=.5>=i?i*(1+n):i+n-i*n,a=2*i-s;return[Math.round(255*r(a,s,t+1/3)),Math.round(255*r(a,s,t)),Math.round(255*r(a,s,t-1/3)),o]},p(c,function(i,r){var o=r.props,s=r.cache,l=r.to,c=r.from;d.fn[i]=function(i){if(l&&!this[s]&&(this[s]=l(this._rgba)),i===t)return this[s].slice();var r,a=e.type(i),u="array"===a||"object"===a?i:arguments,h=this[s].slice();return p(o,function(e,t){var i=u["object"===a?e:t.idx];null==i&&(i=h[t.idx]),h[t.idx]=n(i,t)}),c?(r=d(c(h)),r[s]=h,r):d(h)},p(o,function(t,n){d.fn[t]||(d.fn[t]=function(r){var o,s=e.type(r),l="alpha"===t?this._hsla?"hsla":"rgba":i,d=this[l](),c=d[n.idx];return"undefined"===s?c:("function"===s&&(r=r.call(this,c),s=e.type(r)),null==r&&n.empty?this:("string"===s&&(o=a.exec(r),o&&(r=c+parseFloat(o[2])*("+"===o[1]?1:-1))),d[n.idx]=r,this[l](d)))})})}),d.hook=function(t){var n=t.split(" ");p(n,function(t,n){e.cssHooks[n]={set:function(t,r){var o,s,a="";if("transparent"!==r&&("string"!==e.type(r)||(o=i(r)))){if(r=d(o||r),!h.rgba&&1!==r._rgba[3]){for(s="backgroundColor"===n?t.parentNode:t;(""===a||"transparent"===a)&&s&&s.style;)try{a=e.css(s,"backgroundColor"),s=s.parentNode}catch(l){}r=r.blend(a&&"transparent"!==a?a:"_default")}r=r.toRgbaString()}try{t.style[n]=r}catch(l){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=d(t.elem,n),t.end=d(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})},d.hook(s),e.cssHooks.borderColor={expand:function(e){var t={};return p(["Top","Right","Bottom","Left"],function(n,i){t["border"+i+"Color"]=e}),t}},o=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(s),function(){function t(t){var n,i,r=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,o={};if(r&&r.length&&r[0]&&r[r[0]])for(i=r.length;i--;)n=r[i],"string"==typeof r[n]&&(o[e.camelCase(n)]=r[n]);else for(n in r)"string"==typeof r[n]&&(o[n]=r[n]);return o}function n(t,n){var i,o,s={};for(i in n)o=n[i],t[i]!==o&&(r[i]||(e.fx.step[i]||!isNaN(parseFloat(o)))&&(s[i]=o));return s}var i=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(s.style(e.elem,n,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(r,o,s,a){var l=e.speed(o,s,a);return this.queue(function(){var o,s=e(this),a=s.attr("class")||"",d=l.children?s.find("*").addBack():s;d=d.map(function(){var n=e(this);return{el:n,start:t(this)}}),o=function(){e.each(i,function(e,t){r[t]&&s[t+"Class"](r[t])})},o(),d=d.map(function(){return this.end=t(this.el[0]),this.diff=n(this.start,this.end),this}),s.attr("class",a),d=d.map(function(){var t=this,n=e.Deferred(),i=e.extend({},l,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,i),n.promise()}),e.when.apply(e,d.get()).done(function(){o(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),l.complete.call(s[0])})})},e.fn.extend({addClass:function(t){return function(n,i,r,o){return i?e.effects.animateClass.call(this,{add:n},i,r,o):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(n,i,r,o){return arguments.length>1?e.effects.animateClass.call(this,{remove:n},i,r,o):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(n,i,r,o,s){return"boolean"==typeof i||void 0===i?r?e.effects.animateClass.call(this,i?{add:n}:{remove:n},r,o,s):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:n},i,r,o)}}(e.fn.toggleClass),switchClass:function(t,n,i,r,o){return e.effects.animateClass.call(this,{add:n,remove:t},i,r,o)}})}(),function(){function t(t,n,i,r){return e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},null==n&&(n={}),e.isFunction(n)&&(r=n,i=null,n={}),("number"==typeof n||e.fx.speeds[n])&&(r=i,i=n,n={}),e.isFunction(i)&&(r=i,i=null),n&&e.extend(t,n),i=i||n.duration,t.duration=e.fx.off?0:"number"==typeof i?i:i in e.fx.speeds?e.fx.speeds[i]:e.fx.speeds._default,t.complete=r||n.complete,t}function n(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}function s(e,t){var n=t.outerWidth(),i=t.outerHeight(),r=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/,o=r.exec(e)||["",0,n,i,0];return{top:parseFloat(o[1])||0,right:"auto"===o[2]?n:parseFloat(o[2]),bottom:"auto"===o[3]?i:parseFloat(o[3]),left:parseFloat(o[4])||0}}e.expr&&e.expr.filters&&e.expr.filters.animated&&(e.expr.filters.animated=function(t){return function(n){return!!e(n).data(o)||t(n)}}(e.expr.filters.animated)),e.uiBackCompat!==!1&&e.extend(e.effects,{save:function(e,t){for(var n=0,r=t.length;r>n;n++)null!==t[n]&&e.data(i+t[n],e[0].style[t[n]])},restore:function(e,t){for(var n,r=0,o=t.length;o>r;r++)null!==t[r]&&(n=e.data(i+t[r]),e.css(t[r],n))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},i=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),r={width:t.width(),height:t.height()},o=document.activeElement;try{o.id}catch(s){o=document.body}return t.wrap(i),(t[0]===o||e.contains(t[0],o))&&e(o).trigger("focus"),i=t.parent(),"static"===t.css("position")?(i.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,i){n[i]=t.css(i),isNaN(parseInt(n[i],10))&&(n[i]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(r),i.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).trigger("focus")),t}}),e.extend(e.effects,{version:"1.12.1",define:function(t,n,i){return i||(i=n,n="effect"),e.effects.effect[t]=i,e.effects.effect[t].mode=n,i},scaledDimensions:function(e,t,n){if(0===t)return{height:0,width:0,outerHeight:0,outerWidth:0};var i="horizontal"!==n?(t||100)/100:1,r="vertical"!==n?(t||100)/100:1;return{height:e.height()*r,width:e.width()*i,outerHeight:e.outerHeight()*r,outerWidth:e.outerWidth()*i}},clipToBox:function(e){return{width:e.clip.right-e.clip.left,height:e.clip.bottom-e.clip.top,left:e.clip.left,top:e.clip.top}},unshift:function(e,t,n){var i=e.queue();t>1&&i.splice.apply(i,[1,0].concat(i.splice(t,n))),e.dequeue()},saveStyle:function(e){e.data(r,e[0].style.cssText)},restoreStyle:function(e){e[0].style.cssText=e.data(r)||"",e.removeData(r)},mode:function(e,t){var n=e.is(":hidden");return"toggle"===t&&(t=n?"show":"hide"),(n?"hide"===t:"show"===t)&&(t="none"),t},getBaseline:function(e,t){var n,i;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=e[1]/t.width}return{x:i,y:n}},createPlaceholder:function(t){var n,r=t.css("position"),o=t.position();return t.css({marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()),/^(static|relative)/.test(r)&&(r="absolute",n=e("<"+t[0].nodeName+">").insertAfter(t).css({display:/^(inline|ruby)/.test(t.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight"),"float":t.css("float")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).addClass("ui-effects-placeholder"),t.data(i+"placeholder",n)),t.css({position:r,left:o.left,top:o.top}),n},removePlaceholder:function(e){var t=i+"placeholder",n=e.data(t);n&&(n.remove(),e.removeData(t))},cleanUp:function(t){e.effects.restoreStyle(t),e.effects.removePlaceholder(t)},setTransition:function(t,n,i,r){return r=r||{},e.each(n,function(e,n){var o=t.cssUnit(n);o[0]>0&&(r[n]=o[0]*i+o[1])}),r}}),e.fn.extend({effect:function(){function n(t){function n(){l.removeData(o),e.effects.cleanUp(l),"hide"===i.mode&&l.hide(),a()}function a(){e.isFunction(d)&&d.call(l[0]),e.isFunction(t)&&t()}var l=e(this);i.mode=u.shift(),e.uiBackCompat===!1||s?"none"===i.mode?(l[c](),a()):r.call(l[0],i,n):(l.is(":hidden")?"hide"===c:"show"===c)?(l[c](),a()):r.call(l[0],i,a)}var i=t.apply(this,arguments),r=e.effects.effect[i.effect],s=r.mode,a=i.queue,l=a||"fx",d=i.complete,c=i.mode,u=[],h=function(t){var n=e(this),i=e.effects.mode(n,c)||s;n.data(o,!0),u.push(i),s&&("show"===i||i===s&&"hide"===i)&&n.show(),s&&"none"===i||e.effects.saveStyle(n),e.isFunction(t)&&t()};return e.fx.off||!r?c?this[c](i.duration,d):this.each(function(){d&&d.call(this)}):a===!1?this.each(h).each(n):this.queue(l,h).queue(l,n)},show:function(e){return function(i){if(n(i))return e.apply(this,arguments);var r=t.apply(this,arguments);return r.mode="show",this.effect.call(this,r)}}(e.fn.show),hide:function(e){return function(i){if(n(i))return e.apply(this,arguments);var r=t.apply(this,arguments);return r.mode="hide",this.effect.call(this,r)}}(e.fn.hide),toggle:function(e){return function(i){if(n(i)||"boolean"==typeof i)return e.apply(this,arguments);var r=t.apply(this,arguments);return r.mode="toggle",this.effect.call(this,r)}}(e.fn.toggle),cssUnit:function(t){var n=this.css(t),i=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(i=[parseFloat(n),t])}),i},cssClip:function(e){return e?this.css("clip","rect("+e.top+"px "+e.right+"px "+e.bottom+"px "+e.left+"px)"):s(this.css("clip"),this)},transfer:function(t,n){var i=e(this),r=e(t.to),o="fixed"===r.css("position"),s=e("body"),a=o?s.scrollTop():0,l=o?s.scrollLeft():0,d=r.offset(),c={top:d.top-a,left:d.left-l,height:r.innerHeight(),width:r.innerWidth()},u=i.offset(),h=e("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(t.className).css({top:u.top-a,left:u.left-l,height:i.innerHeight(),width:i.innerWidth(),position:o?"fixed":"absolute"}).animate(c,t.duration,t.easing,function(){h.remove(),e.isFunction(n)&&n()})}}),e.fx.step.clip=function(t){t.clipInit||(t.start=e(t.elem).cssClip(),"string"==typeof t.end&&(t.end=s(t.end,t.elem)),t.clipInit=!0),e(t.elem).cssClip({top:t.pos*(t.end.top-t.start.top)+t.start.top,right:t.pos*(t.end.right-t.start.right)+t.start.right,bottom:t.pos*(t.end.bottom-t.start.bottom)+t.start.bottom,left:t.pos*(t.end.left-t.start.left)+t.start.left})}}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?n(2*e)/2:1-n(-2*e+2)/2}})}();e.effects,e.effects.define("blind","hide",function(t,n){var i={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},r=e(this),o=t.direction||"up",s=r.cssClip(),a={clip:e.extend({},s)},l=e.effects.createPlaceholder(r);a.clip[i[o][0]]=a.clip[i[o][1]],"show"===t.mode&&(r.cssClip(a.clip),l&&l.css(e.effects.clipToBox(a)),a.clip=s),l&&l.animate(e.effects.clipToBox(a),t.duration,t.easing),r.animate(a,{queue:!1,duration:t.duration,easing:t.easing,complete:n})})}(jQuery),function(e){e(jQuery)}(function(e){return function(e){e(jQuery)}(function(e){"use strict";function t(t,n){t||(n=n?": "+n:"",e.error("Fancytree assertion failed"+n))}function n(e,t){var n,i,r=window.console?window.console[e]:null;if(r)try{r.apply(window.console,t)}catch(o){for(i="",n=0;n<t.length;n++)i+=t[n];r(i)}}function i(e){return!(!e.tree||void 0===e.statusNodeType)}function r(t,n,i,r){var o,s,a,l=e.map(e.trim(t).split("."),function(e){
return parseInt(e,10)}),d=e.map(Array.prototype.slice.call(arguments,1),function(e){return parseInt(e,10)});for(o=0;o<d.length;o++)if(s=l[o]||0,a=d[o]||0,s!==a)return s>a;return!0}function o(e,t,n,i,r){var o=function(){var n=t[e],o=i[e],s=t.ext[r],a=function(){return n.apply(t,arguments)},l=function(e){return n.apply(t,e)};return function(){var e=t._local,n=t._super,i=t._superApply;try{return t._local=s,t._super=a,t._superApply=l,o.apply(t,arguments)}finally{t._local=e,t._super=n,t._superApply=i}}}();return o}function s(t,n,i,r){for(var s in i)"function"==typeof i[s]?"function"==typeof t[s]?t[s]=o(s,t,n,i,r):"_"===s.charAt(0)?t.ext[r][s]=o(s,t,n,i,r):e.error("Could not override tree."+s+". Use prefix '_' to create tree."+r+"._"+s):"options"!==s&&(t.ext[r][s]=i[s])}function a(t,n){return void 0===t?e.Deferred(function(){this.resolve()}).promise():e.Deferred(function(){this.resolveWith(t,n)}).promise()}function l(t,n){return void 0===t?e.Deferred(function(){this.reject()}).promise():e.Deferred(function(){this.rejectWith(t,n)}).promise()}function d(e,t){return function(){e.resolveWith(t)}}function c(t){var n=e.extend({},t.data()),i=n.json;return delete n.fancytree,delete n.uiFancytree,i&&(delete n.json,n=e.extend(n,i)),n}function u(e){return(""+e).replace(C,function(e){return k[e]})}function h(e){return e=e.toLowerCase(),function(t){return t.title.toLowerCase().indexOf(e)>=0}}function f(e){var t=new RegExp("^"+e,"i");return function(e){return t.test(e.title)}}function p(n,i){var r,o,s,a;for(this.parent=n,this.tree=n.tree,this.ul=null,this.li=null,this.statusNodeType=null,this._isLoading=!1,this._error=null,this.data={},r=0,o=F.length;o>r;r++)s=F[r],this[s]=i[s];(null!=this.unselectableIgnore||null!=this.unselectableStatus)&&(this.unselectable=!0),i.hideCheckbox&&e.error("'hideCheckbox' node option was removed in v2.23.0: use 'checkbox: false'"),i.data&&e.extend(this.data,i.data);for(s in i)O[s]||e.isFunction(i[s])||L[s]||(this.data[s]=i[s]);null==this.key?this.tree.options.defaultKey?(this.key=this.tree.options.defaultKey(this),t(this.key,"defaultKey() must return a unique key")):this.key="_"+m._nextNodeKey++:this.key=""+this.key,i.active&&(t(null===this.tree.activeNode,"only one active node allowed"),this.tree.activeNode=this),i.selected&&(this.tree.lastSelectedNode=this),a=i.children,a?a.length?this._setChildren(a):this.children=this.lazy?[]:null:this.children=null,this.tree._callHook("treeRegisterNode",this.tree,!0,this)}function g(t){this.widget=t,this.$div=t.element,this.options=t.options,this.options&&(e.isFunction(this.options.lazyload)&&!e.isFunction(this.options.lazyLoad)&&(this.options.lazyLoad=function(){return m.warn("The 'lazyload' event is deprecated since 2014-02-25. Use 'lazyLoad' (with uppercase L) instead."),t.options.lazyload.apply(this,arguments)}),e.isFunction(this.options.loaderror)&&e.error("The 'loaderror' event was renamed since 2014-07-03. Use 'loadError' (with uppercase E) instead."),void 0!==this.options.fx&&m.warn("The 'fx' option was replaced by 'toggleEffect' since 2014-11-30."),void 0!==this.options.removeNode&&e.error("The 'removeNode' event was replaced by 'modifyChild' since 2.20 (2016-09-10).")),this.ext={},this.types={},this.columns={},this.data=c(this.$div),this._id=e.ui.fancytree._nextId++,this._ns=".fancytree-"+this._id,this.activeNode=null,this.focusNode=null,this._hasFocus=null,this._tempCache={},this._lastMousedownNode=null,this._enableUpdate=!0,this.lastSelectedNode=null,this.systemFocusElement=null,this.lastQuicksearchTerm="",this.lastQuicksearchTime=0,this.statusClassPropName="span",this.ariaPropName="li",this.nodeContainerAttrName="li",this.$div.find(">ul.fancytree-container").remove();var n,i={tree:this};this.rootNode=new p(i,{title:"root",key:"root_"+this._id,children:null,expanded:!0}),this.rootNode.parent=null,n=e("<ul>",{"class":"ui-fancytree fancytree-container fancytree-plain"}).appendTo(this.$div),this.$container=n,this.rootNode.ul=n[0],null==this.options.debugLevel&&(this.options.debugLevel=m.debugLevel)}if(e.ui&&e.ui.fancytree)return void e.ui.fancytree.warn("Fancytree: ignored duplicate include");var y,v,m=null,b=new RegExp(/\.|\//),x=/[&<>"'\/]/g,C=/[<>"'\/]/g,_="$recursive_request",k={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},w={16:!0,17:!0,18:!0},N={8:"backspace",9:"tab",10:"return",13:"return",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},S={0:"",1:"left",2:"middle",3:"right"},E="active expanded focus folder lazy radiogroup selected unselectable unselectableIgnore".split(" "),T={},A="columns types".split(" "),F="checkbox expanded extraClasses folder icon iconTooltip key lazy radiogroup refKey selected statusNodeType title tooltip type unselectable unselectableIgnore unselectableStatus".split(" "),O={},P={},L={active:!0,children:!0,data:!0,focus:!0};for(y=0;y<E.length;y++)T[E[y]]=!0;for(y=0;y<F.length;y++)v=F[y],O[v]=!0,v!==v.toLowerCase()&&(P[v.toLowerCase()]=v);return t(e.ui,"Fancytree requires jQuery UI (http://jqueryui.com)"),p.prototype={_findDirectChild:function(e){var t,n,i=this.children;if(i)if("string"==typeof e){for(t=0,n=i.length;n>t;t++)if(i[t].key===e)return i[t]}else{if("number"==typeof e)return this.children[e];if(e.parent===this)return e}return null},_setChildren:function(e){t(e&&(!this.children||0===this.children.length),"only init supported"),this.children=[];for(var n=0,i=e.length;i>n;n++)this.children.push(new p(this,e[n]))},addChildren:function(n,i){var r,o,s,a=this.getFirstChild(),l=this.getLastChild(),d=null,c=[];for(e.isPlainObject(n)&&(n=[n]),this.children||(this.children=[]),r=0,o=n.length;o>r;r++)c.push(new p(this,n[r]));if(d=c[0],null==i?this.children=this.children.concat(c):(i=this._findDirectChild(i),s=e.inArray(i,this.children),t(s>=0,"insertBefore must be an existing child"),this.children.splice.apply(this.children,[s,0].concat(c))),a&&!i){for(r=0,o=c.length;o>r;r++)c[r].render();a!==this.getFirstChild()&&a.renderStatus(),l!==this.getLastChild()&&l.renderStatus()}else(!this.parent||this.parent.ul||this.tr)&&this.render();return 3===this.tree.options.selectMode&&this.fixSelection3FromEndNodes(),this.triggerModifyChild("add",1===c.length?c[0]:null),d},addClass:function(e){return this.toggleClass(e,!0)},addNode:function(e,n){switch((void 0===n||"over"===n)&&(n="child"),n){case"after":return this.getParent().addChildren(e,this.getNextSibling());case"before":return this.getParent().addChildren(e,this);case"firstChild":var i=this.children?this.children[0]:null;return this.addChildren(e,i);case"child":case"over":return this.addChildren(e)}t(!1,"Invalid mode: "+n)},addPagingNode:function(t,n){var i,r;if(n=n||"child",t===!1){for(i=this.children.length-1;i>=0;i--)r=this.children[i],"paging"===r.statusNodeType&&this.removeChild(r);return void(this.partload=!1)}return t=e.extend({title:this.tree.options.strings.moreData,statusNodeType:"paging",icon:!1},t),this.partload=!0,this.addNode(t,n)},appendSibling:function(e){return this.addNode(e,"after")},applyPatch:function(t){if(null===t)return this.remove(),a(this);var n,i,r,o={children:!0,expanded:!0,parent:!0};for(n in t)r=t[n],o[n]||e.isFunction(r)||(O[n]?this[n]=r:this.data[n]=r);return t.hasOwnProperty("children")&&(this.removeChildren(),t.children&&this._setChildren(t.children)),this.isVisible()&&(this.renderTitle(),this.renderStatus()),i=t.hasOwnProperty("expanded")?this.setExpanded(t.expanded):a(this)},collapseSiblings:function(){return this.tree._callHook("nodeCollapseSiblings",this)},copyTo:function(e,t,n){return e.addNode(this.toDict(!0,n),t)},countChildren:function(e){var t,n,i,r=this.children;if(!r)return 0;if(i=r.length,e!==!1)for(t=0,n=i;n>t;t++)i+=r[t].countChildren();return i},debug:function(e){this.tree.options.debugLevel>=2&&(Array.prototype.unshift.call(arguments,this.toString()),n("log",arguments))},discard:function(){return this.warn("FancytreeNode.discard() is deprecated since 2014-02-16. Use .resetLazy() instead."),this.resetLazy()},discardMarkup:function(e){var t=e?"nodeRemoveMarkup":"nodeRemoveChildMarkup";this.tree._callHook(t,this)},findAll:function(t){t=e.isFunction(t)?t:h(t);var n=[];return this.visit(function(e){t(e)&&n.push(e)}),n},findFirst:function(t){t=e.isFunction(t)?t:h(t);var n=null;return this.visit(function(e){return t(e)?(n=e,!1):void 0}),n},_changeSelectStatusAttrs:function(e){var n=!1,i=this.tree.options,r=m.evalOption("unselectable",this,this,i,!1),o=m.evalOption("unselectableStatus",this,this,i,void 0);switch(r&&null!=o&&(e=o),e){case!1:n=this.selected||this.partsel,this.selected=!1,this.partsel=!1;break;case!0:n=!this.selected||!this.partsel,this.selected=!0,this.partsel=!0;break;case void 0:n=this.selected||!this.partsel,this.selected=!1,this.partsel=!0;break;default:t(!1,"invalid state: "+e)}return n&&this.renderStatus(),n},fixSelection3AfterClick:function(e){var t=this.isSelected();this.visit(function(e){e._changeSelectStatusAttrs(t)}),this.fixSelection3FromEndNodes(e)},fixSelection3FromEndNodes:function(e){function n(e){var t,r,o,s,a,l,d,c,u,h=e.children;if(h&&h.length){for(l=!0,d=!1,t=0,r=h.length;r>t;t++)o=h[t],s=n(o),c=m.evalOption("unselectableIgnore",o,o,i,!1),c||(s!==!1&&(d=!0),s!==!0&&(l=!1));a=l?!0:d?void 0:!1}else u=m.evalOption("unselectableStatus",e,e,i,void 0),a=null==u?!!e.selected:!!u;return e._changeSelectStatusAttrs(a),a}var i=this.tree.options;t(3===i.selectMode,"expected selectMode 3"),n(this),this.visitParents(function(e){var t,n,r,o,s,a,l=e.children,d=!0,c=!1;for(t=0,n=l.length;n>t;t++)r=l[t],s=m.evalOption("unselectableIgnore",r,r,i,!1),s||(a=m.evalOption("unselectableStatus",r,r,i,void 0),o=null==a?!!r.selected:!!a,(o||r.partsel)&&(c=!0),o||(d=!1));o=d?!0:c?void 0:!1,e._changeSelectStatusAttrs(o)})},fromDict:function(t){for(var n in t)O[n]?this[n]=t[n]:"data"===n?e.extend(this.data,t.data):e.isFunction(t[n])||L[n]||(this.data[n]=t[n]);t.children&&(this.removeChildren(),this.addChildren(t.children)),this.renderTitle()},getChildren:function(){return void 0===this.hasChildren()?void 0:this.children},getFirstChild:function(){return this.children?this.children[0]:null},getIndex:function(){return e.inArray(this,this.parent.children)},getIndexHier:function(t,n){t=t||".";var i,r=[];return e.each(this.getParentList(!1,!0),function(e,t){i=""+(t.getIndex()+1),n&&(i=("0000000"+i).substr(-n)),r.push(i)}),r.join(t)},getKeyPath:function(e){var t=[],n=this.tree.options.keyPathSeparator;return this.visitParents(function(e){e.parent&&t.unshift(e.key)},!e),n+t.join(n)},getLastChild:function(){return this.children?this.children[this.children.length-1]:null},getLevel:function(){for(var e=0,t=this.parent;t;)e++,t=t.parent;return e},getNextSibling:function(){if(this.parent){var e,t,n=this.parent.children;for(e=0,t=n.length-1;t>e;e++)if(n[e]===this)return n[e+1]}return null},getParent:function(){return this.parent},getParentList:function(e,t){for(var n=[],i=t?this:this.parent;i;)(e||i.parent)&&n.unshift(i),i=i.parent;return n},getPrevSibling:function(){if(this.parent){var e,t,n=this.parent.children;for(e=1,t=n.length;t>e;e++)if(n[e]===this)return n[e-1]}return null},getSelectedNodes:function(e){var t=[];return this.visit(function(n){return n.selected&&(t.push(n),e===!0)?"skip":void 0}),t},hasChildren:function(){return this.lazy?null==this.children?void 0:0===this.children.length?!1:1===this.children.length&&this.children[0].isStatusNode()?void 0:!0:!(!this.children||!this.children.length)},hasFocus:function(){return this.tree.hasFocus()&&this.tree.focusNode===this},info:function(e){this.tree.options.debugLevel>=1&&(Array.prototype.unshift.call(arguments,this.toString()),n("info",arguments))},isActive:function(){return this.tree.activeNode===this},isChildOf:function(e){return this.parent&&this.parent===e},isDescendantOf:function(t){if(!t||t.tree!==this.tree)return!1;for(var n=this.parent;n;){if(n===t)return!0;n===n.parent&&e.error("Recursive parent link: "+n),n=n.parent}return!1},isExpanded:function(){return!!this.expanded},isFirstSibling:function(){var e=this.parent;return!e||e.children[0]===this},isFolder:function(){return!!this.folder},isLastSibling:function(){var e=this.parent;return!e||e.children[e.children.length-1]===this},isLazy:function(){return!!this.lazy},isLoaded:function(){return!this.lazy||void 0!==this.hasChildren()},isLoading:function(){return!!this._isLoading},isRoot:function(){return this.isRootNode()},isPartsel:function(){return!this.selected&&!!this.partsel},isPartload:function(){return!!this.partload},isRootNode:function(){return this.tree.rootNode===this},isSelected:function(){return!!this.selected},isStatusNode:function(){return!!this.statusNodeType},isPagingNode:function(){return"paging"===this.statusNodeType},isTopLevel:function(){return this.tree.rootNode===this.parent},isUndefined:function(){return void 0===this.hasChildren()},isVisible:function(){var e,t,n=this.getParentList(!1,!1);for(e=0,t=n.length;t>e;e++)if(!n[e].expanded)return!1;return!0},lazyLoad:function(e){return this.warn("FancytreeNode.lazyLoad() is deprecated since 2014-02-16. Use .load() instead."),this.load(e)},load:function(e){var n,i,r=this,o=this.isExpanded();return t(this.isLazy(),"load() requires a lazy node"),e||this.isUndefined()?(this.isLoaded()&&this.resetLazy(),i=this.tree._triggerNodeEvent("lazyLoad",this),i===!1?a(this):(t("boolean"!=typeof i,"lazyLoad event must return source in data.result"),n=this.tree._callHook("nodeLoadChildren",this,i),o?(this.expanded=!0,n.always(function(){r.render()})):n.always(function(){r.renderStatus()}),n)):a(this)},makeVisible:function(t){var n,i=this,r=[],o=new e.Deferred,s=this.getParentList(!1,!1),a=s.length,l=!(t&&t.noAnimation===!0),d=!(t&&t.scrollIntoView===!1);for(n=a-1;n>=0;n--)r.push(s[n].setExpanded(!0,t));return e.when.apply(e,r).done(function(){d?i.scrollIntoView(l).done(function(){o.resolve()}):o.resolve()}),o.promise()},moveTo:function(n,i,r){void 0===i||"over"===i?i="child":"firstChild"===i&&(n.children&&n.children.length?(i="before",n=n.children[0]):i="child");var o,s=this.parent,a="child"===i?n:n.parent;if(this!==n){if(this.parent?a.isDescendantOf(this)&&e.error("Cannot move a node to its own descendant"):e.error("Cannot move system root"),a!==s&&s.triggerModifyChild("remove",this),1===this.parent.children.length){if(this.parent===a)return;this.parent.children=this.parent.lazy?[]:null,this.parent.expanded=!1}else o=e.inArray(this,this.parent.children),t(o>=0,"invalid source parent"),this.parent.children.splice(o,1);if(this.parent=a,a.hasChildren())switch(i){case"child":a.children.push(this);break;case"before":o=e.inArray(n,a.children),t(o>=0,"invalid target parent"),a.children.splice(o,0,this);break;case"after":o=e.inArray(n,a.children),t(o>=0,"invalid target parent"),a.children.splice(o+1,0,this);break;default:e.error("Invalid mode "+i)}else a.children=[this];r&&n.visit(r,!0),a===s?a.triggerModifyChild("move",this):a.triggerModifyChild("add",this),this.tree!==n.tree&&(this.warn("Cross-tree moveTo is experimantal!"),this.visit(function(e){e.tree=n.tree},!0)),s.isDescendantOf(a)||s.render(),a.isDescendantOf(s)||a===s||a.render()}},navigate:function(t,n){function i(i){if(i){try{i.makeVisible({scrollIntoView:!1})}catch(r){}return e(i.span).is(":visible")?n===!1?i.setFocus():i.setActive():(i.debug("Navigate: skipping hidden node"),void i.navigate(t,n))}}var r,o,s,l=!0,d=e.ui.keyCode,c=null;switch(t){case d.BACKSPACE:this.parent&&this.parent.parent&&(s=i(this.parent));break;case d.HOME:this.tree.visit(function(t){return e(t.span).is(":visible")?(s=i(t),!1):void 0});break;case d.END:this.tree.visit(function(t){e(t.span).is(":visible")&&(s=t)}),s&&(s=i(s));break;case d.LEFT:this.expanded?(this.setExpanded(!1),s=i(this)):this.parent&&this.parent.parent&&(s=i(this.parent));break;case d.RIGHT:this.expanded||!this.children&&!this.lazy?this.children&&this.children.length&&(s=i(this.children[0])):(this.setExpanded(),s=i(this));break;case d.UP:for(c=this.getPrevSibling();c&&!e(c.span).is(":visible");)c=c.getPrevSibling();for(;c&&c.expanded&&c.children&&c.children.length;)c=c.children[c.children.length-1];!c&&this.parent&&this.parent.parent&&(c=this.parent),s=i(c);break;case d.DOWN:if(this.expanded&&this.children&&this.children.length)c=this.children[0];else for(o=this.getParentList(!1,!0),r=o.length-1;r>=0;r--){for(c=o[r].getNextSibling();c&&!e(c.span).is(":visible");)c=c.getNextSibling();if(c)break}s=i(c);break;default:l=!1}return s||a()},remove:function(){return this.parent.removeChild(this)},removeChild:function(e){return this.tree._callHook("nodeRemoveChild",this,e)},removeChildren:function(){return this.tree._callHook("nodeRemoveChildren",this)},removeClass:function(e){return this.toggleClass(e,!1)},render:function(e,t){return this.tree._callHook("nodeRender",this,e,t)},renderTitle:function(){return this.tree._callHook("nodeRenderTitle",this)},renderStatus:function(){return this.tree._callHook("nodeRenderStatus",this)},replaceWith:function(n){var i,r=this.parent,o=e.inArray(this,r.children),s=this;return t(this.isPagingNode(),"replaceWith() currently requires a paging status node"),i=this.tree._callHook("nodeLoadChildren",this,n),i.done(function(e){var t=s.children;for(y=0;y<t.length;y++)t[y].parent=r;r.children.splice.apply(r.children,[o+1,0].concat(t)),s.children=null,s.remove(),r.render()}).fail(function(){s.setExpanded()}),i},resetLazy:function(){this.removeChildren(),this.expanded=!1,this.lazy=!0,this.children=void 0,this.renderStatus()},scheduleAction:function(t,n){this.tree.timer&&clearTimeout(this.tree.timer),this.tree.timer=null;var i=this;switch(t){case"cancel":break;case"expand":this.tree.timer=setTimeout(function(){i.tree.debug("setTimeout: trigger expand"),i.setExpanded(!0)},n);break;case"activate":this.tree.timer=setTimeout(function(){i.tree.debug("setTimeout: trigger activate"),i.setActive(!0)},n);break;default:e.error("Invalid mode "+t)}},scrollIntoView:function(n,r){void 0!==r&&i(r)&&(this.warn("scrollIntoView() with 'topNode' option is deprecated since 2014-05-08. Use 'options.topNode' instead."),r={topNode:r});var o,s,l,d,c=e.extend({effects:n===!0?{duration:200,queue:!1}:n,scrollOfs:this.tree.options.scrollOfs,scrollParent:this.tree.options.scrollParent||this.tree.$container,topNode:null},r),u=new e.Deferred,h=this,f=e(this.span).height(),p=e(c.scrollParent),g=c.scrollOfs.top||0,y=c.scrollOfs.bottom||0,v=p.height(),m=p.scrollTop(),b=p,x=p[0]===window,C=c.topNode||null,_=null;return e(this.span).is(":visible")?(x?(s=e(this.span).offset().top,o=C&&C.span?e(C.span).offset().top:0,b=e("html,body")):(t(p[0]!==document&&p[0]!==document.body,"scrollParent should be a simple element or `window`, not document or body."),d=p.offset().top,s=e(this.span).offset().top-d+m,o=C?e(C.span).offset().top-d+m:0,l=Math.max(0,p.innerHeight()-p[0].clientHeight),v-=l),m+g>s?_=s-g:s+f>m+v-y&&(_=s+f-v+y,C&&(t(C.isRootNode()||e(C.span).is(":visible"),"topNode must be visible"),_>o&&(_=o-g))),null!==_?c.effects?(c.effects.complete=function(){u.resolveWith(h)},b.stop(!0).animate({scrollTop:_},c.effects)):(b[0].scrollTop=_,u.resolveWith(this)):u.resolveWith(this),u.promise()):(this.warn("scrollIntoView(): node is invisible."),a())},setActive:function(e,t){return this.tree._callHook("nodeSetActive",this,e,t)},setExpanded:function(e,t){return this.tree._callHook("nodeSetExpanded",this,e,t)},setFocus:function(e){return this.tree._callHook("nodeSetFocus",this,e)},setSelected:function(e,t){return this.tree._callHook("nodeSetSelected",this,e,t)},setStatus:function(e,t,n){return this.tree._callHook("nodeSetStatus",this,e,t,n)},setTitle:function(e){this.title=e,this.renderTitle(),this.triggerModify("rename")},sortChildren:function(e,t){var n,i,r=this.children;if(r){if(e=e||function(e,t){var n=e.title.toLowerCase(),i=t.title.toLowerCase();return n===i?0:n>i?1:-1},r.sort(e),t)for(n=0,i=r.length;i>n;n++)r[n].children&&r[n].sortChildren(e,"$norender$");"$norender$"!==t&&this.render(),this.triggerModifyChild("sort")}},toDict:function(t,n){var i,r,o,s={},a=this;if(e.each(F,function(e,t){(a[t]||a[t]===!1)&&(s[t]=a[t])}),e.isEmptyObject(this.data)||(s.data=e.extend({},this.data),e.isEmptyObject(s.data)&&delete s.data),n&&n(s,a),t&&this.hasChildren())for(s.children=[],i=0,r=this.children.length;r>i;i++)o=this.children[i],o.isStatusNode()||s.children.push(o.toDict(!0,n));return s},toggleClass:function(t,n){var i,r,o=/\S+/g,s=t.match(o)||[],a=0,l=!1,d=this[this.tree.statusClassPropName],c=" "+(this.extraClasses||"")+" ";for(d&&e(d).toggleClass(t,n);i=s[a++];)if(r=c.indexOf(" "+i+" ")>=0,n=void 0===n?!r:!!n)r||(c+=i+" ",l=!0);else for(;c.indexOf(" "+i+" ")>-1;)c=c.replace(" "+i+" "," ");return this.extraClasses=e.trim(c),l},toggleExpanded:function(){return this.tree._callHook("nodeToggleExpanded",this)},toggleSelected:function(){return this.tree._callHook("nodeToggleSelected",this)},toString:function(){return"FancytreeNode@"+this.key+"[title='"+this.title+"']"},triggerModifyChild:function(t,n,i){var r,o=this.tree.options.modifyChild;o&&(n&&n.parent!==this&&e.error("childNode "+n+" is not a child of "+this),r={node:this,tree:this.tree,operation:t,childNode:n||null},i&&e.extend(r,i),o({type:"modifyChild"},r))},triggerModify:function(e,t){this.parent.triggerModifyChild(e,this,t)},visit:function(e,t){var n,i,r=!0,o=this.children;if(t===!0&&(r=e(this),r===!1||"skip"===r))return r;if(o)for(n=0,i=o.length;i>n&&(r=o[n].visit(e,!0),r!==!1);n++);return r},visitAndLoad:function(t,n,i){var r,o,s,l=this;return t&&n===!0&&(o=t(l),o===!1||"skip"===o)?i?o:a():l.children||l.lazy?(r=new e.Deferred,s=[],l.load().done(function(){for(var n=0,i=l.children.length;i>n;n++){if(o=l.children[n].visitAndLoad(t,!0,!0),o===!1){r.reject();break}"skip"!==o&&s.push(o)}e.when.apply(this,s).then(function(){r.resolve()})}),r.promise()):a()},visitParents:function(e,t){if(t&&e(this)===!1)return!1;for(var n=this.parent;n;){if(e(n)===!1)return!1;n=n.parent}return!0},visitSiblings:function(e,t){var n,i,r,o=this.parent.children;for(n=0,i=o.length;i>n;n++)if(r=o[n],(t||r!==this)&&e(r)===!1)return!1;return!0},warn:function(e){Array.prototype.unshift.call(arguments,this.toString()),n("warn",arguments)}},g.prototype={_makeHookContext:function(t,n,i){var r,o;return void 0!==t.node?(n&&t.originalEvent!==n&&e.error("invalid args"),r=t):t.tree?(o=t.tree,r={node:t,tree:o,widget:o.widget,options:o.widget.options,originalEvent:n,typeInfo:o.types[t.type]||{}}):t.widget?r={node:null,tree:t,widget:t.widget,options:t.widget.options,originalEvent:n}:e.error("invalid args"),i&&e.extend(r,i),r},_callHook:function(t,n,i){var r=this._makeHookContext(n),o=this[t],s=Array.prototype.slice.call(arguments,2);return e.isFunction(o)||e.error("_callHook('"+t+"') is not a function"),s.unshift(r),o.apply(this,s)},_setExpiringValue:function(e,t,n){this._tempCache[e]={value:t,expire:Date.now()+(+n||50)}},_getExpiringValue:function(e){var t=this._tempCache[e];return t&&t.expire>Date.now()?t.value:(delete this._tempCache[e],null)},_requireExtension:function(n,i,r,o){r=!!r;var s=this._local.name,a=this.options.extensions,l=e.inArray(n,a)<e.inArray(s,a),d=i&&null==this.ext[n],c=!d&&null!=r&&r!==l;return t(s&&s!==n,"invalid or same name"),d||c?(o||(d||i?(o="'"+s+"' extension requires '"+n+"'",c&&(o+=" to be registered "+(r?"before":"after")+" itself")):o="If used together, `"+n+"` must be registered "+(r?"before":"after")+" `"+s+"`"),e.error(o),!1):!0},activateKey:function(e){var t=this.getNodeByKey(e);return t?t.setActive():this.activeNode&&this.activeNode.setActive(!1),t},addPagingNode:function(e,t){return this.rootNode.addPagingNode(e,t)},applyPatch:function(n){var i,r,o,s,a,l,c=n.length,u=[];for(r=0;c>r;r++)o=n[r],t(2===o.length,"patchList must be an array of length-2-arrays"),s=o[0],a=o[1],l=null===s?this.rootNode:this.getNodeByKey(s),l?(i=new e.Deferred,u.push(i),l.applyPatch(a).always(d(i,l))):this.warn("could not find node with key '"+s+"'");return e.when.apply(e,u).promise()},clear:function(e){this._callHook("treeClear",this)},count:function(){return this.rootNode.countChildren()},debug:function(e){this.options.debugLevel>=2&&(Array.prototype.unshift.call(arguments,this.toString()),n("log",arguments))},enableUpdate:function(e){return e=e!==!1,!!this._enableUpdate==!!e?e:(this._enableUpdate=e,e?(this.debug("enableUpdate(true): redraw "),this.render()):this.debug("enableUpdate(false)..."),!e)},error:function(e){Array.prototype.unshift.call(arguments,this.toString()),n("error",arguments)},findAll:function(e){return this.rootNode.findAll(e)},findFirst:function(e){return this.rootNode.findFirst(e)},findNextNode:function(t,n,i){t="string"==typeof t?f(t):t,n=n||this.getFirstChild();var r=null,o=n.parent.children,s=null,a=function(e,t,n){var i,r,o=e.children,s=o.length,l=o[t];if(l&&n(l)===!1)return!1;if(l&&l.children&&l.expanded&&a(l,0,n)===!1)return!1;for(i=t+1;s>i;i++)if(a(e,i,n)===!1)return!1;return r=e.parent,r?a(r,r.children.indexOf(e)+1,n):a(e,0,n)};return a(n.parent,o.indexOf(n),function(i){return i===r?!1:(r=r||i,e(i.span).is(":visible")?t(i)&&(s=i,s!==n)?!1:void 0:void i.debug("quicksearch: skipping hidden node"))}),s},generateFormElements:function(t,n,i){function r(t){d.append(e("<input>",{type:"checkbox",name:s,value:t.key,checked:!0}))}i=i||{};var o,s="string"==typeof t?t:"ft_"+this._id+"[]",a="string"==typeof n?n:"ft_"+this._id+"_active",l="fancytree_result_"+this._id,d=e("#"+l),c=3===this.options.selectMode&&i.stopOnParents!==!1;d.length?d.empty():d=e("<div>",{id:l}).hide().insertAfter(this.$container),n!==!1&&this.activeNode&&d.append(e("<input>",{type:"radio",name:a,value:this.activeNode.key,checked:!0})),i.filter?this.visit(function(e){var t=i.filter(e);return"skip"===t?t:void(t!==!1&&r(e))}):t!==!1&&(o=this.getSelectedNodes(c),e.each(o,function(e,t){r(t)}))},getActiveNode:function(){return this.activeNode},getFirstChild:function(){return this.rootNode.getFirstChild()},getFocusNode:function(){return this.focusNode},getNodeByKey:function(e,t){var n,i;return!t&&(n=document.getElementById(this.options.idPrefix+e))?n.ftnode?n.ftnode:null:(t=t||this.rootNode,i=null,t.visit(function(t){return t.key===e?(i=t,!1):void 0},!0),i)},getRootNode:function(){return this.rootNode},getSelectedNodes:function(e){return this.rootNode.getSelectedNodes(e)},hasFocus:function(){return!!this._hasFocus},info:function(e){this.options.debugLevel>=1&&(Array.prototype.unshift.call(arguments,this.toString()),n("info",arguments))},loadKeyPath:function(t,n){var i,r,o,s=this,a=new e.Deferred,l=this.getRootNode(),d=this.options.keyPathSeparator,c=[],u=e.extend({},n);for("function"==typeof n?i=n:n&&n.callback&&(i=n.callback),u.callback=function(e,t,n){i&&i.call(e,t,n),a.notifyWith(e,[{node:t,status:n}])},null==u.matchKey&&(u.matchKey=function(e,t){return e.key===t}),e.isArray(t)||(t=[t]),r=0;r<t.length;r++)o=t[r],o.charAt(0)===d&&(o=o.substr(1)),c.push(o.split(d));return setTimeout(function(){s._loadKeyPathImpl(a,u,l,c).done(function(){a.resolve()})},0),a.promise()},_loadKeyPathImpl:function(t,n,i,r){function o(e,t){var i,r,o=e.children;if(o)for(i=0,r=o.length;r>i;i++)if(n.matchKey(o[i],t))return o[i];return null}function s(e,t,i){n.callback(y,t,"loading"),t.load().done(function(){y._loadKeyPathImpl.call(y,e,n,t,i).always(d(e,y))}).fail(function(i){y.warn("loadKeyPath: error loading lazy "+t),n.callback(y,u,"error"),e.rejectWith(y)})}var a,l,c,u,h,f,p,g,y=this;for(h={},l=0;l<r.length;l++)for(p=r[l],f=i;p.length;){if(c=p.shift(),u=o(f,c),!u){this.warn("loadKeyPath: key not found: "+c+" (parent: "+f+")"),n.callback(this,c,"error");break}if(0===p.length){n.callback(this,u,"ok");break}if(u.lazy&&void 0===u.hasChildren()){n.callback(this,u,"loaded"),c=u.key,h[c]?h[c].pathSegList.push(p):h[c]={parent:u,pathSegList:[p]};break}n.callback(this,u,"loaded"),f=u}a=[];for(var v in h){var m=h[v];g=new e.Deferred,a.push(g),s(g,m.parent,m.pathSegList)}return e.when.apply(e,a).promise()},reactivate:function(e){var t,n=this.activeNode;return n?(this.activeNode=null,t=n.setActive(!0,{noFocus:!0}),e&&n.setFocus(),t):a()},reload:function(e){return this._callHook("treeClear",this),this._callHook("treeLoad",this,e)},render:function(e,t){return this.rootNode.render(e,t)},setFocus:function(e){return this._callHook("treeSetFocus",this,e)},toDict:function(e,t){var n=this.rootNode.toDict(!0,t);return e?n:n.children},toString:function(){return"Fancytree@"+this._id},_triggerNodeEvent:function(e,t,n,i){var r=this._makeHookContext(t,n,i),o=this.widget._trigger(e,n,r);return o!==!1&&void 0!==r.result?r.result:o},_triggerTreeEvent:function(e,t,n){var i=this._makeHookContext(this,t,n),r=this.widget._trigger(e,t,i);return r!==!1&&void 0!==i.result?i.result:r},visit:function(e){return this.rootNode.visit(e,!1)},warn:function(e){Array.prototype.unshift.call(arguments,this.toString()),n("warn",arguments)}},e.extend(g.prototype,{nodeClick:function(e){var t,n,i=e.targetType,r=e.node;if("expander"===i){if(r.isLoading())return void r.debug("Got 2nd click while loading: ignored");this._callHook("nodeToggleExpanded",e)}else if("checkbox"===i)this._callHook("nodeToggleSelected",e),e.options.focusOnSelect&&this._callHook("nodeSetFocus",e,!0);else{if(n=!1,t=!0,r.folder)switch(e.options.clickFolderMode){case 2:n=!0,t=!1;break;case 3:t=!0,n=!0}t&&(this.nodeSetFocus(e),this._callHook("nodeSetActive",e,!0)),n&&this._callHook("nodeToggleExpanded",e)}},nodeCollapseSiblings:function(e,t){var n,i,r,o=e.node;if(o.parent)for(n=o.parent.children,i=0,r=n.length;r>i;i++)n[i]!==o&&n[i].expanded&&this._callHook("nodeSetExpanded",n[i],!1,t)},nodeDblclick:function(e){"title"===e.targetType&&4===e.options.clickFolderMode&&this._callHook("nodeToggleExpanded",e),"title"===e.targetType&&e.originalEvent.preventDefault()},nodeKeydown:function(t){var n,i,r,o,s=t.originalEvent,a=t.node,l=t.tree,d=t.options,c=s.which,u=String.fromCharCode(c),h=!(s.altKey||s.ctrlKey||s.metaKey||s.shiftKey),f=e(s.target),p=!0,g=!(s.ctrlKey||!d.autoActivate);if(a||(o=this.getActiveNode()||this.getFirstChild(),o&&(o.setFocus(),a=t.node=this.focusNode,a.debug("Keydown force focus on active node"))),d.quicksearch&&h&&/\w/.test(u)&&!N[c]&&!f.is(":input:enabled"))return i=(new Date).getTime(),i-l.lastQuicksearchTime>500&&(l.lastQuicksearchTerm=""),l.lastQuicksearchTime=i,l.lastQuicksearchTerm+=u,n=l.findNextNode(l.lastQuicksearchTerm,l.getActiveNode()),n&&n.setActive(),void s.preventDefault();switch(m.eventToString(s)){case"+":case"=":l.nodeSetExpanded(t,!0);break;case"-":l.nodeSetExpanded(t,!1);break;case"space":a.isPagingNode()?l._triggerNodeEvent("clickPaging",t,s):m.evalOption("checkbox",a,a,d,!1)?l.nodeToggleSelected(t):l.nodeSetActive(t,!0);break;case"return":l.nodeSetActive(t,!0);break;case"home":case"end":case"backspace":case"left":case"right":case"up":case"down":r=a.navigate(s.which,g,!0);break;default:p=!1}p&&s.preventDefault()},nodeLoadChildren:function(n,i){var r,o,s,a=n.tree,l=n.node,d=(new Date).getTime();if(e.isFunction(i)&&(i=i.call(a,{type:"source"},n),t(!e.isFunction(i),"source callback must not return another function")),i.url&&(l._requestId&&l.warn("Recursive load request #"+d+" while #"+l._requestId+" is pending."),r=e.extend({},n.options.ajax,i),l._requestId=d,r.debugDelay?(o=r.debugDelay,e.isArray(o)&&(o=o[0]+Math.random()*(o[1]-o[0])),l.warn("nodeLoadChildren waiting debugDelay "+Math.round(o)+" ms ..."),r.debugDelay=!1,s=e.Deferred(function(t){setTimeout(function(){e.ajax(r).done(function(){t.resolveWith(this,arguments)}).fail(function(){t.rejectWith(this,arguments)})},o)})):s=e.ajax(r),i=new e.Deferred,s.done(function(t,r,o){var s,c;if("json"!==this.dataType&&"jsonp"!==this.dataType||"string"!=typeof t||e.error("Ajax request returned a string (did you get the JSON dataType wrong?)."),
l._requestId&&l._requestId>d)return void i.rejectWith(this,[_]);if(n.options.postProcess){try{c=a._triggerNodeEvent("postProcess",n,n.originalEvent,{response:t,error:null,dataType:this.dataType})}catch(u){c={error:u,message:""+u,details:"postProcess failed"}}if(c.error)return s=e.isPlainObject(c.error)?c.error:{message:c.error},s=a._makeHookContext(l,null,s),void i.rejectWith(this,[s]);t=e.isArray(c)?c:t}else t&&t.hasOwnProperty("d")&&n.options.enableAspx&&(t="string"==typeof t.d?e.parseJSON(t.d):t.d);i.resolveWith(this,[t])}).fail(function(e,t,n){var r=a._makeHookContext(l,null,{error:e,args:Array.prototype.slice.call(arguments),message:n,details:e.status+": "+n});i.rejectWith(this,[r])})),e.isFunction(i.then)&&e.isFunction(i["catch"])&&(s=i,i=new e.Deferred,s.then(function(e){i.resolve(e)},function(e){i.reject(e)})),e.isFunction(i.promise))a.nodeSetStatus(n,"loading"),i.done(function(e){a.nodeSetStatus(n,"ok"),l._requestId=null}).fail(function(e){var t;return e===_?void l.warn("Ignored response for obsolete load request #"+d+" (expected #"+l._requestId+")"):(e.node&&e.error&&e.message?t=e:(t=a._makeHookContext(l,null,{error:e,args:Array.prototype.slice.call(arguments),message:e?e.message||e.toString():""}),"[object Object]"===t.message&&(t.message="")),l.warn("Load children failed ("+t.message+")",t),void(a._triggerNodeEvent("loadError",t,null)!==!1&&a.nodeSetStatus(n,"error",t.message,t.details)))});else if(n.options.postProcess){var c=a._triggerNodeEvent("postProcess",n,n.originalEvent,{response:i,error:null,dataType:typeof i});i=e.isArray(c)?c:i}return e.when(i).done(function(n){var i;e.isPlainObject(n)&&(t(l.isRootNode(),"source may only be an object for root nodes (expecting an array of child objects otherwise)"),t(e.isArray(n.children),"if an object is passed as source, it must contain a 'children' array (all other properties are added to 'tree.data')"),i=n,n=n.children,delete i.children,e.each(A,function(e,t){void 0!==i[t]&&(a[t]=i[t],delete i[t])}),e.extend(a.data,i)),t(e.isArray(n),"expected array of children"),l._setChildren(n),a._triggerNodeEvent("loadChildren",l)})},nodeLoadKeyPath:function(e,t){},nodeRemoveChild:function(n,i){var r,o=n.node,s=e.extend({},n,{node:i}),a=o.children;return 1===a.length?(t(i===a[0],"invalid single child"),this.nodeRemoveChildren(n)):(this.activeNode&&(i===this.activeNode||this.activeNode.isDescendantOf(i))&&this.activeNode.setActive(!1),this.focusNode&&(i===this.focusNode||this.focusNode.isDescendantOf(i))&&(this.focusNode=null),this.nodeRemoveMarkup(s),this.nodeRemoveChildren(s),r=e.inArray(i,a),t(r>=0,"invalid child"),o.triggerModifyChild("remove",i),i.visit(function(e){e.parent=null},!0),this._callHook("treeRegisterNode",this,!1,i),void a.splice(r,1))},nodeRemoveChildMarkup:function(t){var n=t.node;n.ul&&(n.isRootNode()?e(n.ul).empty():(e(n.ul).remove(),n.ul=null),n.visit(function(e){e.li=e.ul=null}))},nodeRemoveChildren:function(t){var n,i=t.tree,r=t.node,o=r.children;o&&(this.activeNode&&this.activeNode.isDescendantOf(r)&&this.activeNode.setActive(!1),this.focusNode&&this.focusNode.isDescendantOf(r)&&(this.focusNode=null),this.nodeRemoveChildMarkup(t),n=e.extend({},t),r.triggerModifyChild("remove",null),r.visit(function(e){e.parent=null,i._callHook("treeRegisterNode",i,!1,e)}),r.lazy?r.children=[]:r.children=null,r.isRootNode()||(r.expanded=!1),this.nodeRenderStatus(t))},nodeRemoveMarkup:function(t){var n=t.node;n.li&&(e(n.li).remove(),n.li=null),this.nodeRemoveChildMarkup(t)},nodeRender:function(n,i,r,o,s){var a,l,d,c,u,h,f,p=n.node,g=n.tree,y=n.options,v=y.aria,m=!1,b=p.parent,x=!b,C=p.children,_=null;if(g._enableUpdate!==!1&&(x||b.ul)){if(t(x||b.ul,"parent UL must exist"),x||(p.li&&(i||p.li.parentNode!==p.parent.ul)&&(p.li.parentNode===p.parent.ul?_=p.li.nextSibling:this.debug("Unlinking "+p+" (must be child of "+p.parent+")"),this.nodeRemoveMarkup(n)),p.li?this.nodeRenderStatus(n):(m=!0,p.li=document.createElement("li"),p.li.ftnode=p,p.key&&y.generateIds&&(p.li.id=y.idPrefix+p.key),p.span=document.createElement("span"),p.span.className="fancytree-node",v&&!p.tr&&e(p.li).attr("role","treeitem"),p.li.appendChild(p.span),this.nodeRenderTitle(n),y.createNode&&y.createNode.call(g,{type:"createNode"},n)),y.renderNode&&y.renderNode.call(g,{type:"renderNode"},n)),C){if(x||p.expanded||r===!0){for(p.ul||(p.ul=document.createElement("ul"),(o===!0&&!s||!p.expanded)&&(p.ul.style.display="none"),v&&e(p.ul).attr("role","group"),p.li?p.li.appendChild(p.ul):p.tree.$div.append(p.ul)),c=0,u=C.length;u>c;c++)f=e.extend({},n,{node:C[c]}),this.nodeRender(f,i,r,!1,!0);for(a=p.ul.firstChild;a;)d=a.ftnode,d&&d.parent!==p?(p.debug("_fixParent: remove missing "+d,a),h=a.nextSibling,a.parentNode.removeChild(a),a=h):a=a.nextSibling;for(a=p.ul.firstChild,c=0,u=C.length-1;u>c;c++)l=C[c],d=a.ftnode,l!==d?p.ul.insertBefore(l.li,d.li):a=a.nextSibling}}else p.ul&&(this.warn("remove child markup for "+p),this.nodeRemoveChildMarkup(n));x||m&&b.ul.insertBefore(p.li,_)}},nodeRenderTitle:function(t,n){var i,r,o,s,a,l,d,c,h=t.node,f=t.tree,p=t.options,g=p.aria,y=h.getLevel(),v=[];void 0!==n&&(h.title=n),h.span&&f._enableUpdate!==!1&&(a=g&&h.hasChildren()!==!1?" role='button'":"",y<p.minExpandLevel?(h.lazy||(h.expanded=!0),y>1&&v.push("<span "+a+" class='fancytree-expander fancytree-expander-fixed'></span>")):v.push("<span "+a+" class='fancytree-expander'></span>"),i=m.evalOption("checkbox",h,h,p,!1),i&&!h.isStatusNode()&&(a=g?" role='checkbox'":"",r="fancytree-checkbox",("radio"===i||h.parent&&h.parent.radiogroup)&&(r+=" fancytree-radio"),v.push("<span "+a+" class='"+r+"'></span>")),void 0!==h.data.iconClass&&(h.icon?e.error("'iconClass' node option is deprecated since v2.14.0: use 'icon' only instead"):(h.warn("'iconClass' node option is deprecated since v2.14.0: use 'icon' instead"),h.icon=h.data.iconClass)),o=m.evalOption("icon",h,h,p,!0),o!==!1&&(a=g?" role='presentation'":"",c=m.evalOption("iconTooltip",h,h,p,null),c=c?" title='"+u(c)+"'":"","string"==typeof o?b.test(o)?(o="/"===o.charAt(0)?o:(p.imagePath||"")+o,v.push("<img src='"+o+"' class='fancytree-icon'"+c+" alt='' />")):v.push("<span "+a+" class='fancytree-custom-icon "+o+"'"+c+"></span>"):o.text?v.push("<span "+a+" class='fancytree-custom-icon "+(o.addClass||"")+"'"+c+">"+o.text+"</span>"):v.push("<span "+a+" class='fancytree-icon'"+c+"></span>")),s="",p.renderTitle&&(s=p.renderTitle.call(f,{type:"renderTitle"},t)||""),s||(d=m.evalOption("tooltip",h,h,p,null),d===!0&&(d=h.title),d=d?" title='"+u(d)+"'":"",l=p.titlesTabbable?" tabindex='0'":"",s="<span class='fancytree-title'"+d+l+">"+(p.escapeTitles?m.escapeHtml(h.title):h.title)+"</span>"),v.push(s),h.span.innerHTML=v.join(""),this.nodeRenderStatus(t),p.enhanceTitle&&(t.$title=e(">span.fancytree-title",h.span),s=p.enhanceTitle.call(f,{type:"enhanceTitle"},t)||""))},nodeRenderStatus:function(t){var n,i=t.node,r=t.tree,o=t.options,s=i.hasChildren(),a=i.isLastSibling(),l=o.aria,d=o._classNames,c=[],u=i[r.statusClassPropName];u&&r._enableUpdate!==!1&&(l&&(n=e(i.tr||i.li)),c.push(d.node),r.activeNode===i&&c.push(d.active),r.focusNode===i&&c.push(d.focused),i.expanded&&c.push(d.expanded),l&&(s!==!1?n.attr("aria-expanded",Boolean(i.expanded)):n.removeAttr("aria-expanded")),i.folder&&c.push(d.folder),s!==!1&&c.push(d.hasChildren),a&&c.push(d.lastsib),i.lazy&&null==i.children&&c.push(d.lazy),i.partload&&c.push(d.partload),i.partsel&&c.push(d.partsel),m.evalOption("unselectable",i,i,o,!1)&&c.push(d.unselectable),i._isLoading&&c.push(d.loading),i._error&&c.push(d.error),i.statusNodeType&&c.push(d.statusNodePrefix+i.statusNodeType),i.selected?(c.push(d.selected),l&&n.attr("aria-selected",!0)):l&&n.attr("aria-selected",!1),i.extraClasses&&c.push(i.extraClasses),s===!1?c.push(d.combinedExpanderPrefix+"n"+(a?"l":"")):c.push(d.combinedExpanderPrefix+(i.expanded?"e":"c")+(i.lazy&&null==i.children?"d":"")+(a?"l":"")),c.push(d.combinedIconPrefix+(i.expanded?"e":"c")+(i.folder?"f":"")),u.className=c.join(" "),i.li&&e(i.li).toggleClass(d.lastsib,a))},nodeSetActive:function(n,i,r){r=r||{};var o,s=n.node,d=n.tree,c=n.options,u=r.noEvents===!0,h=r.noFocus===!0,f=s===d.activeNode;return i=i!==!1,f===i?a(s):i&&!u&&this._triggerNodeEvent("beforeActivate",s,n.originalEvent)===!1?l(s,["rejected"]):(i?(d.activeNode&&(t(d.activeNode!==s,"node was active (inconsistency)"),o=e.extend({},n,{node:d.activeNode}),d.nodeSetActive(o,!1),t(null===d.activeNode,"deactivate was out of sync?")),c.activeVisible&&s.makeVisible({scrollIntoView:h&&null==d.focusNode}),d.activeNode=s,d.nodeRenderStatus(n),h||d.nodeSetFocus(n),u||d._triggerNodeEvent("activate",s,n.originalEvent)):(t(d.activeNode===s,"node was not active (inconsistency)"),d.activeNode=null,this.nodeRenderStatus(n),u||n.tree._triggerNodeEvent("deactivate",s,n.originalEvent)),a(s))},nodeSetExpanded:function(t,n,i){i=i||{};var r,o,s,d,c,u,h=t.node,f=t.tree,p=t.options,g=i.noAnimation===!0,y=i.noEvents===!0;if(n=n!==!1,h.expanded&&n||!h.expanded&&!n)return a(h);if(n&&!h.lazy&&!h.hasChildren())return a(h);if(!n&&h.getLevel()<p.minExpandLevel)return l(h,["locked"]);if(!y&&this._triggerNodeEvent("beforeExpand",h,t.originalEvent)===!1)return l(h,["rejected"]);if(g||h.isVisible()||(g=i.noAnimation=!0),o=new e.Deferred,n&&!h.expanded&&p.autoCollapse){c=h.getParentList(!1,!0),u=p.autoCollapse;try{for(p.autoCollapse=!1,s=0,d=c.length;d>s;s++)this._callHook("nodeCollapseSiblings",c[s],i)}finally{p.autoCollapse=u}}return o.done(function(){var e=h.getLastChild();n&&p.autoScroll&&!g&&e?e.scrollIntoView(!0,{topNode:h}).always(function(){y||t.tree._triggerNodeEvent(n?"expand":"collapse",t)}):y||t.tree._triggerNodeEvent(n?"expand":"collapse",t)}),r=function(i){var r,o,s=p._classNames,a=p.toggleEffect;if(h.expanded=n,f._callHook("nodeRender",t,!1,!1,!0),h.ul)if(r="none"!==h.ul.style.display,o=!!h.expanded,r===o)h.warn("nodeSetExpanded: UL.style.display already set");else{if(a&&!g)return e(h.li).addClass(s.animating),void e(h.ul).addClass(s.animating).toggle(a.effect,a.options,a.duration,function(){e(this).removeClass(s.animating),e(h.li).removeClass(s.animating),i()});h.ul.style.display=h.expanded||!parent?"":"none"}i()},n&&h.lazy&&void 0===h.hasChildren()?h.load().done(function(){o.notifyWith&&o.notifyWith(h,["loaded"]),r(function(){o.resolveWith(h)})}).fail(function(e){r(function(){o.rejectWith(h,["load failed ("+e+")"])})}):r(function(){o.resolveWith(h)}),o.promise()},nodeSetFocus:function(t,n){var i,r=t.tree,o=t.node,s=r.options,a=t.originalEvent?e(t.originalEvent.target).is(":input"):!1;if(n=n!==!1,r.focusNode){if(r.focusNode===o&&n)return;i=e.extend({},t,{node:r.focusNode}),r.focusNode=null,this._triggerNodeEvent("blur",i),this._callHook("nodeRenderStatus",i)}n&&(this.hasFocus()||(o.debug("nodeSetFocus: forcing container focus"),this._callHook("treeSetFocus",t,!0,{calledByNode:!0})),o.makeVisible({scrollIntoView:!1}),r.focusNode=o,s.titlesTabbable?a||e(o.span).find(".fancytree-title").focus():0===e(document.activeElement).closest(".fancytree-container").length&&e(r.$container).focus(),s.aria&&e(r.$container).attr("aria-activedescendant",e(o.tr||o.li).uniqueId().attr("id")),this._triggerNodeEvent("focus",t),s.autoScroll&&o.scrollIntoView(),this._callHook("nodeRenderStatus",t))},nodeSetSelected:function(e,t,n){n=n||{};var i=e.node,r=e.tree,o=e.options,s=n.noEvents===!0,a=i.parent;if(t=t!==!1,!m.evalOption("unselectable",i,i,o,!1)){if(i._lastSelectIntent=t,!!i.selected===t&&(3!==o.selectMode||!i.partsel||t))return t;if(!s&&this._triggerNodeEvent("beforeSelect",i,e.originalEvent)===!1)return!!i.selected;t&&1===o.selectMode?(r.lastSelectedNode&&r.lastSelectedNode.setSelected(!1),i.selected=t):3!==o.selectMode||!a||a.radiogroup||i.radiogroup?a&&a.radiogroup?i.visitSiblings(function(e){e._changeSelectStatusAttrs(t&&e===i)},!0):i.selected=t:(i.selected=t,i.fixSelection3AfterClick(n)),this.nodeRenderStatus(e),r.lastSelectedNode=t?i:null,s||r._triggerNodeEvent("select",e)}},nodeSetStatus:function(t,n,i,r){function o(){var e=a.children?a.children[0]:null;if(e&&e.isStatusNode()){try{a.ul&&(a.ul.removeChild(e.li),e.li=null)}catch(t){}1===a.children.length?a.children=[]:a.children.shift()}}function s(t,n){var i=a.children?a.children[0]:null;return i&&i.isStatusNode()?(e.extend(i,t),i.statusNodeType=n,l._callHook("nodeRenderTitle",i)):(a._setChildren([t]),a.children[0].statusNodeType=n,l.render()),a.children[0]}var a=t.node,l=t.tree;switch(n){case"ok":o(),a._isLoading=!1,a._error=null,a.renderStatus();break;case"loading":a.parent||s({title:l.options.strings.loading+(i?" ("+i+")":""),checkbox:!1,tooltip:r},n),a._isLoading=!0,a._error=null,a.renderStatus();break;case"error":s({title:l.options.strings.loadError+(i?" ("+i+")":""),checkbox:!1,tooltip:r},n),a._isLoading=!1,a._error={message:i,details:r},a.renderStatus();break;case"nodata":s({title:l.options.strings.noData,checkbox:!1,tooltip:r},n),a._isLoading=!1,a._error=null,a.renderStatus();break;default:e.error("invalid node status "+n)}},nodeToggleExpanded:function(e){return this.nodeSetExpanded(e,!e.node.expanded)},nodeToggleSelected:function(e){var t=e.node,n=!t.selected;return t.partsel&&!t.selected&&t._lastSelectIntent===!0&&(n=!1,t.selected=!0),t._lastSelectIntent=n,this.nodeSetSelected(e,n)},treeClear:function(e){var t=e.tree;t.activeNode=null,t.focusNode=null,t.$div.find(">ul.fancytree-container").empty(),t.rootNode.children=null},treeCreate:function(e){},treeDestroy:function(e){this.$div.find(">ul.fancytree-container").remove(),this.$source&&this.$source.removeClass("ui-helper-hidden")},treeInit:function(t){var n=t.tree,i=n.options;n.$container.attr("tabindex",i.tabindex),e.each(A,function(e,t){void 0!==i[t]&&(n.info("Move option "+t+" to tree"),n[t]=i[t],delete i[t])}),i.rtl?n.$container.attr("DIR","RTL").addClass("fancytree-rtl"):n.$container.removeAttr("DIR").removeClass("fancytree-rtl"),i.aria&&(n.$container.attr("role","tree"),1!==i.selectMode&&n.$container.attr("aria-multiselectable",!0)),this.treeLoad(t)},treeLoad:function(n,i){var r,o,s,a,l=n.tree,d=n.widget.element,u=e.extend({},n,{node:this.rootNode});if(l.rootNode.children&&this.treeClear(n),i=i||this.options.source)"string"==typeof i&&e.error("Not implemented");else switch(o=d.data("type")||"html"){case"html":s=d.find(">ul:first"),s.addClass("ui-fancytree-source ui-helper-hidden"),i=e.ui.fancytree.parseHtml(s),this.data=e.extend(this.data,c(s));break;case"json":i=e.parseJSON(d.text()),d.contents().filter(function(){return 3===this.nodeType}).remove(),e.isPlainObject(i)&&(t(e.isArray(i.children),"if an object is passed as source, it must contain a 'children' array (all other properties are added to 'tree.data')"),r=i,i=i.children,delete r.children,e.each(A,function(e,t){void 0!==r[t]&&(l[t]=r[t],delete r[t])}),e.extend(l.data,r));break;default:e.error("Invalid data-type: "+o)}return a=this.nodeLoadChildren(u,i).done(function(){l.render(),3===n.options.selectMode&&l.rootNode.fixSelection3FromEndNodes(),l.activeNode&&l.options.activeVisible&&l.activeNode.makeVisible(),l._triggerTreeEvent("init",null,{status:!0})}).fail(function(){l.render(),l._triggerTreeEvent("init",null,{status:!1})})},treeRegisterNode:function(e,t,n){},treeSetFocus:function(t,n,i){var r;n=n!==!1,n!==this.hasFocus()&&(this._hasFocus=n,!n&&this.focusNode?this.focusNode.setFocus(!1):!n||i&&i.calledByNode||e(this.$container).focus(),this.$container.toggleClass("fancytree-treefocus",n),this._triggerTreeEvent(n?"focusTree":"blurTree"),n&&!this.activeNode&&(r=this._lastMousedownNode||this.getFirstChild(),r&&r.setFocus()))},treeSetOption:function(t,n,i){var r=t.tree,o=!0,s=!1,a=!1;switch(n){case"aria":case"checkbox":case"icon":case"minExpandLevel":case"tabindex":s=!0,a=!0;break;case"escapeTitles":case"tooltip":a=!0;break;case"rtl":i===!1?r.$container.removeAttr("DIR").removeClass("fancytree-rtl"):r.$container.attr("DIR","RTL").addClass("fancytree-rtl"),a=!0;break;case"source":o=!1,r._callHook("treeLoad",r,i),a=!0}r.debug("set option "+n+"="+i+" <"+typeof i+">"),o&&(this.widget._super?this.widget._super.call(this.widget,n,i):e.Widget.prototype._setOption.call(this.widget,n,i)),s&&r._callHook("treeCreate",r),a&&r.render(!0,!1)}}),e.widget("ui.fancytree",{options:{activeVisible:!0,ajax:{type:"GET",cache:!1,dataType:"json"},aria:!0,autoActivate:!0,autoCollapse:!1,autoScroll:!1,checkbox:!1,clickFolderMode:4,debugLevel:null,disabled:!1,enableAspx:!0,escapeTitles:!1,extensions:[],toggleEffect:{effect:"blind",options:{direction:"vertical",scale:"box"},duration:200},generateIds:!1,icon:!0,idPrefix:"ft_",focusOnSelect:!1,keyboard:!0,keyPathSeparator:"/",minExpandLevel:1,quicksearch:!1,rtl:!1,scrollOfs:{top:0,bottom:0},scrollParent:null,selectMode:2,strings:{loading:"Loading...",loadError:"Load error!",moreData:"More...",noData:"No data."},tabindex:"0",titlesTabbable:!1,tooltip:!1,_classNames:{node:"fancytree-node",folder:"fancytree-folder",animating:"fancytree-animating",combinedExpanderPrefix:"fancytree-exp-",combinedIconPrefix:"fancytree-ico-",hasChildren:"fancytree-has-children",active:"fancytree-active",selected:"fancytree-selected",expanded:"fancytree-expanded",lazy:"fancytree-lazy",focused:"fancytree-focused",partload:"fancytree-partload",partsel:"fancytree-partsel",radio:"fancytree-radio",unselectable:"fancytree-unselectable",lastsib:"fancytree-lastsib",loading:"fancytree-loading",error:"fancytree-error",statusNodePrefix:"fancytree-statusnode-"},lazyLoad:null,postProcess:null},_create:function(){this.tree=new g(this),this.$source=this.source||"json"===this.element.data("type")?this.element:this.element.find(">ul:first");var n,i,r,o=this.options,a=o.extensions,l=this.tree;for(r=0;r<a.length;r++)i=a[r],n=e.ui.fancytree._extensions[i],n||e.error("Could not apply extension '"+i+"' (it is not registered, did you forget to include it?)"),this.tree.options[i]=e.extend(!0,{},n.options,this.tree.options[i]),t(void 0===this.tree.ext[i],"Extension name must not exist as Fancytree.ext attribute: '"+i+"'"),this.tree.ext[i]={},s(this.tree,l,n,i),l=n;void 0!==o.icons&&(o.icon!==!0?e.error("'icons' tree option is deprecated since v2.14.0: use 'icon' only instead"):(this.tree.warn("'icons' tree option is deprecated since v2.14.0: use 'icon' instead"),o.icon=o.icons)),void 0!==o.iconClass&&(o.icon?e.error("'iconClass' tree option is deprecated since v2.14.0: use 'icon' only instead"):(this.tree.warn("'iconClass' tree option is deprecated since v2.14.0: use 'icon' instead"),o.icon=o.iconClass)),void 0!==o.tabbable&&(o.tabindex=o.tabbable?"0":"-1",this.tree.warn("'tabbable' tree option is deprecated since v2.17.0: use 'tabindex='"+o.tabindex+"' instead")),this.tree._callHook("treeCreate",this.tree)},_init:function(){this.tree._callHook("treeInit",this.tree),this._bind()},_setOption:function(e,t){return this.tree._callHook("treeSetOption",this.tree,e,t)},destroy:function(){this._unbind(),this.tree._callHook("treeDestroy",this.tree),e.Widget.prototype.destroy.call(this)},_unbind:function(){var t=this.tree._ns;this.element.off(t),this.tree.$container.off(t),e(document).off(t)},_bind:function(){var t=this,n=this.options,i=this.tree,r=i._ns;this._unbind(),i.$container.on("focusin"+r+" focusout"+r,function(t){var n=m.getNode(t),r="focusin"===t.type;return r&&i._getExpiringValue("focusin")?void m.info("Ignored double focusin."):(i._setExpiringValue("focusin",!0,50),r&&!n&&(n=i._getExpiringValue("mouseDownNode"),n&&m.info("Reconstruct mouse target for focusin from recent event.")),void(n?i._callHook("nodeSetFocus",i._makeHookContext(n,t),r):i.tbody&&e(t.target).parents("table.fancytree-container > thead").length?i.debug("Ignore focus event outside table body.",t):i._callHook("treeSetFocus",i,r)))}).on("selectstart"+r,"span.fancytree-title",function(e){e.preventDefault()}).on("keydown"+r,function(e){if(n.disabled||n.keyboard===!1)return!0;var t,r=i.focusNode,o=i._makeHookContext(r||i,e),s=i.phase;try{return i.phase="userEvent",t=r?i._triggerNodeEvent("keydown",r,e):i._triggerTreeEvent("keydown",e),"preventNav"===t?t=!0:t!==!1&&(t=i._callHook("nodeKeydown",o)),t}finally{i.phase=s}}).on("mousedown"+r,function(e){var t=m.getEventTarget(e);i._lastMousedownNode=t?t.node:null,i._setExpiringValue("mouseDownNode",i._lastMousedownNode)}).on("click"+r+" dblclick"+r,function(e){if(n.disabled)return!0;var i,r=m.getEventTarget(e),o=r.node,s=t.tree,a=s.phase;if(!o)return!0;i=s._makeHookContext(o,e);try{switch(s.phase="userEvent",e.type){case"click":return i.targetType=r.type,o.isPagingNode()?s._triggerNodeEvent("clickPaging",i,e)===!0:s._triggerNodeEvent("click",i,e)===!1?!1:s._callHook("nodeClick",i);case"dblclick":return i.targetType=r.type,s._triggerNodeEvent("dblclick",i,e)===!1?!1:s._callHook("nodeDblclick",i)}}finally{s.phase=a}})},getActiveNode:function(){return this.tree.activeNode},getNodeByKey:function(e){return this.tree.getNodeByKey(e)},getRootNode:function(){return this.tree.rootNode},getTree:function(){return this.tree}}),m=e.ui.fancytree,e.extend(e.ui.fancytree,{version:"2.27.0",buildType:"production",debugLevel:1,_nextId:1,_nextNodeKey:1,_extensions:{},_FancytreeClass:g,_FancytreeNodeClass:p,jquerySupports:{positionMyOfs:r(e.ui.version,1,9)},assert:function(e,n){return t(e,n)},createTree:function(t,n){var i=e(t).fancytree(n).fancytree("getTree");return i},debounce:function(e,t,n,i){var r;return 3===arguments.length&&"boolean"!=typeof n&&(i=n,n=!1),function(){var o=arguments;i=i||this,n&&!r&&t.apply(i,o),clearTimeout(r),r=setTimeout(function(){n||t.apply(i,o),r=null},e)}},debug:function(t){e.ui.fancytree.debugLevel>=2&&n("log",arguments)},error:function(e){n("error",arguments)},escapeHtml:function(e){return(""+e).replace(x,function(e){return k[e]})},fixPositionOptions:function(t){if((t.offset||(""+t.my+t.at).indexOf("%")>=0)&&e.error("expected new position syntax (but '%' is not supported)"),!e.ui.fancytree.jquerySupports.positionMyOfs){var n=/(\w+)([+-]?\d+)?\s+(\w+)([+-]?\d+)?/.exec(t.my),i=/(\w+)([+-]?\d+)?\s+(\w+)([+-]?\d+)?/.exec(t.at),r=(n[2]?+n[2]:0)+(i[2]?+i[2]:0),o=(n[4]?+n[4]:0)+(i[4]?+i[4]:0);t=e.extend({},t,{my:n[1]+" "+n[3],at:i[1]+" "+i[3]}),(r||o)&&(t.offset=""+r+" "+o)}return t},getEventTarget:function(t){var n=t&&t.target?t.target.className:"",i={node:this.getNode(t.target),type:void 0};return/\bfancytree-title\b/.test(n)?i.type="title":/\bfancytree-expander\b/.test(n)?i.type=i.node.hasChildren()===!1?"prefix":"expander":/\bfancytree-checkbox\b/.test(n)?i.type="checkbox":/\bfancytree(-custom)?-icon\b/.test(n)?i.type="icon":/\bfancytree-node\b/.test(n)?i.type="title":t&&e(t.target).is("ul[role=group]")?(m.info("Ignoring click on outer UL."),i.node=null):t&&t.target&&e(t.target).closest(".fancytree-title").length&&(i.type="title"),i},getEventTargetType:function(e){return this.getEventTarget(e).type},getNode:function(t){if(t instanceof p)return t;for(t instanceof e?t=t[0]:void 0!==t.originalEvent&&(t=t.target);t;){if(t.ftnode)return t.ftnode;t=t.parentNode}return null},getTree:function(t){var n;return t instanceof g?t:(void 0===t&&(t=0),"number"==typeof t?t=e(".fancytree-container").eq(t):"string"==typeof t?t=e(t).eq(0):void 0!==t.selector?t=t.eq(0):void 0!==t.originalEvent&&(t=e(t.target)),t=t.closest(":ui-fancytree"),n=t.data("ui-fancytree")||t.data("fancytree"),n?n.tree:null)},evalOption:function(t,n,i,r,o){var s,a,l=n.tree,d=r[t],c=i[t];return e.isFunction(d)?(s={node:n,tree:l,widget:l.widget,options:l.widget.options,typeInfo:l.types[n.type]||{}},a=d.call(l,{type:t},s),null==a&&(a=c)):a=null!=c?c:d,null==a&&(a=o),a},setSpanIcon:function(t,n,i){var r=e(t);"string"==typeof i?r.attr("class",n+" "+i):(i.text&&r.text(""+i.text),r.attr("class",n+" "+(i.addClass||"")))},eventToString:function(e){var t=e.which,n=e.type,i=[];return e.altKey&&i.push("alt"),e.ctrlKey&&i.push("ctrl"),e.metaKey&&i.push("meta"),e.shiftKey&&i.push("shift"),"click"===n||"dblclick"===n?i.push(S[e.button]+n):w[t]||i.push(N[t]||String.fromCharCode(t).toLowerCase()),i.join("+")},info:function(t){e.ui.fancytree.debugLevel>=1&&n("info",arguments)},keyEventToString:function(e){return this.warn("keyEventToString() is deprecated: use eventToString()"),this.eventToString(e)},overrideMethod:function(t,n,i){var r,o=t[n]||e.noop;t[n]=function(){try{return r=this._super,this._super=o,i.apply(this,arguments)}finally{this._super=r}}},parseHtml:function(t){var n,i,r,o,s,a,l,d,u=t.find(">li"),h=[];return u.each(function(){var u,f,p=e(this),g=p.find(">span:first",this),y=g.length?null:p.find(">a:first"),v={tooltip:null,data:{}};for(g.length?v.title=g.html():y&&y.length?(v.title=y.html(),v.data.href=y.attr("href"),v.data.target=y.attr("target"),v.tooltip=y.attr("title")):(v.title=p.html(),s=v.title.search(/<ul/i),s>=0&&(v.title=v.title.substring(0,s))),v.title=e.trim(v.title),o=0,a=E.length;a>o;o++)v[E[o]]=void 0;for(n=this.className.split(" "),r=[],o=0,a=n.length;a>o;o++)i=n[o],T[i]?v[i]=!0:r.push(i);if(v.extraClasses=r.join(" "),l=p.attr("title"),l&&(v.tooltip=l),l=p.attr("id"),l&&(v.key=l),p.attr("hideCheckbox")&&(v.checkbox=!1),u=c(p),u&&!e.isEmptyObject(u)){for(f in P)u.hasOwnProperty(f)&&(u[P[f]]=u[f],delete u[f]);for(o=0,a=F.length;a>o;o++)l=F[o],d=u[l],null!=d&&(delete u[l],v[l]=d);e.extend(v.data,u)}t=p.find(">ul:first"),t.length?v.children=e.ui.fancytree.parseHtml(t):v.children=v.lazy?void 0:null,h.push(v)}),h},registerExtension:function(n){t(null!=n.name,"extensions must have a `name` property."),t(null!=n.version,"extensions must have a `version` property."),e.ui.fancytree._extensions[n.name]=n},unescapeHtml:function(e){var t=document.createElement("div");return t.innerHTML=e,0===t.childNodes.length?"":t.childNodes[0].nodeValue},warn:function(e){n("warn",arguments)}}),e.ui.fancytree}),function(e){e(jQuery)}(function(e){"use strict";return e.ui.fancytree._FancytreeClass.prototype.countSelected=function(e){var t=this;t.options;return t.getSelectedNodes(e).length},e.ui.fancytree._FancytreeNodeClass.prototype.updateCounters=function(){var t=this,n=e("span.fancytree-childcounter",t.span),i=t.tree.options.childcounter,r=t.countChildren(i.deep);t.data.childCounter=r,!r&&i.hideZeros||t.isExpanded()&&i.hideExpanded?n.remove():(n.length||(n=e("<span class='fancytree-childcounter'/>").appendTo(e("span.fancytree-icon",t.span))),n.text(r)),!i.deep||t.isTopLevel()||t.isRoot()||t.parent.updateCounters()},e.ui.fancytree.prototype.widgetMethod1=function(e){this.tree;return e},e.ui.fancytree.registerExtension({name:"childcounter",version:"2.27.0",options:{deep:!0,hideZeros:!0,hideExpanded:!1},foo:42,_appendCounter:function(e){},treeInit:function(e){e.options,e.options.childcounter;this._superApply(arguments),this.$container.addClass("fancytree-ext-childcounter")},treeDestroy:function(e){this._superApply(arguments)},nodeRenderTitle:function(t,n){var i=t.node,r=t.options.childcounter,o=null==i.data.childCounter?i.countChildren(r.deep):+i.data.childCounter;this._super(t,n),!o&&r.hideZeros||i.isExpanded()&&r.hideExpanded||e("span.fancytree-icon",i.span).append(e("<span class='fancytree-childcounter'/>").text(o))},nodeSetExpanded:function(e,t,n){var i=e.tree;e.node;return this._superApply(arguments).always(function(){i.nodeRenderTitle(e)})}}),e.ui.fancytree}),function(e){e(jQuery)}(function(e){"use strict";function t(t,n){t||(n=n?": "+n:"",e.error("Assertion failed"+n))}function n(e,t){var n;for(n=e.length-1;n>=0;n--)if(e[n]===t)return e.splice(n,1),!0;return!1}function i(e,t,n){for(var i,r,o=3&e.length,s=e.length-o,a=n,l=3432918353,d=461845907,c=0;s>c;)r=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,r=(65535&r)*l+(((r>>>16)*l&65535)<<16)&4294967295,r=r<<15|r>>>17,r=(65535&r)*d+(((r>>>16)*d&65535)<<16)&4294967295,a^=r,a=a<<13|a>>>19,i=5*(65535&a)+((5*(a>>>16)&65535)<<16)&4294967295,a=(65535&i)+27492+(((i>>>16)+58964&65535)<<16);switch(r=0,o){case 3:r^=(255&e.charCodeAt(c+2))<<16;case 2:r^=(255&e.charCodeAt(c+1))<<8;case 1:r^=255&e.charCodeAt(c),r=(65535&r)*l+(((r>>>16)*l&65535)<<16)&4294967295,r=r<<15|r>>>17,r=(65535&r)*d+(((r>>>16)*d&65535)<<16)&4294967295,a^=r}return a^=e.length,a^=a>>>16,a=2246822507*(65535&a)+((2246822507*(a>>>16)&65535)<<16)&4294967295,a^=a>>>13,a=3266489909*(65535&a)+((3266489909*(a>>>16)&65535)<<16)&4294967295,a^=a>>>16,t?("0000000"+(a>>>0).toString(16)).substr(-8):a>>>0}function r(t){var n,r=e.map(t.getParentList(!1,!0),function(e){return e.refKey||e.key});return r=r.join("/"),n="id_"+i(r,!0)}return e.ui.fancytree._FancytreeNodeClass.prototype.getCloneList=function(t){var n,i=this.tree,r=i.refMap[this.refKey]||null,o=i.keyMap;return r&&(n=this.key,t?r=e.map(r,function(e){return o[e]}):(r=e.map(r,function(e){return e===n?null:o[e]}),r.length<1&&(r=null))),r},e.ui.fancytree._FancytreeNodeClass.prototype.isClone=function(){var e=this.refKey||null,t=e&&this.tree.refMap[e]||null;return!!(t&&t.length>1)},e.ui.fancytree._FancytreeNodeClass.prototype.reRegister=function(t,n){t=null==t?null:""+t,n=null==n?null:""+n;var i=this.tree,r=this.key,o=this.refKey,s=i.keyMap,a=i.refMap,l=a[o]||null,d=!1;return null!=t&&t!==this.key&&(s[t]&&e.error("[ext-clones] reRegister("+t+"): already exists: "+this),delete s[r],s[t]=this,l&&(a[o]=e.map(l,function(e){return e===r?t:e})),this.key=t,d=!0),null!=n&&n!==this.refKey&&(l&&(1===l.length?delete a[o]:a[o]=e.map(l,function(e){return e===r?null:e})),a[n]?a[n].append(t):a[n]=[this.key],this.refKey=n,d=!0),d},e.ui.fancytree._FancytreeNodeClass.prototype.setRefKey=function(e){return this.reRegister(null,e)},e.ui.fancytree._FancytreeClass.prototype.getNodesByRef=function(t,n){var i=this.keyMap,r=this.refMap[t]||null;return r&&(r=n?e.map(r,function(e){var t=i[e];return t.isDescendantOf(n)?t:null}):e.map(r,function(e){return i[e]}),r.length<1&&(r=null)),r},e.ui.fancytree._FancytreeClass.prototype.changeRefKey=function(e,t){var n,i,r=this.keyMap,o=this.refMap[e]||null;if(o){for(n=0;n<o.length;n++)i=r[o[n]],i.refKey=t;delete this.refMap[e],this.refMap[t]=o}},e.ui.fancytree.registerExtension({name:"clones",version:"2.27.0",options:{highlightActiveClones:!0,highlightClones:!1},treeCreate:function(e){this._superApply(arguments),e.tree.refMap={},e.tree.keyMap={}},treeInit:function(e){this.$container.addClass("fancytree-ext-clones"),t(null==e.options.defaultKey),e.options.defaultKey=function(e){return r(e)},this._superApply(arguments)},treeClear:function(e){return e.tree.refMap={},e.tree.keyMap={},this._superApply(arguments)},treeRegisterNode:function(i,r,o){var s,a,l=i.tree,d=l.keyMap,c=l.refMap,u=o.key,h=o&&null!=o.refKey?""+o.refKey:null;return o.isStatusNode()?this._super(i,r,o):(r?(null!=d[o.key]&&e.error("clones.treeRegisterNode: node.key already exists: "+o),d[u]=o,h&&(s=c[h],s?(s.push(u),2===s.length&&i.options.clones.highlightClones&&d[s[0]].renderStatus()):c[h]=[u])):(null==d[u]&&e.error("clones.treeRegisterNode: node.key not registered: "+o.key),delete d[u],h&&(s=c[h],s&&(a=s.length,1>=a?(t(1===a),t(s[0]===u),delete c[h]):(n(s,u),2===a&&i.options.clones.highlightClones&&d[s[0]].renderStatus())))),this._super(i,r,o))},nodeRenderStatus:function(t){var n,i,r=t.node;return i=this._super(t),t.options.clones.highlightClones&&(n=e(r[t.tree.statusClassPropName]),n.length&&r.isClone()&&n.addClass("fancytree-clone")),i},nodeSetActive:function(t,n,i){var r,o=t.tree.statusClassPropName,s=t.node;return r=this._superApply(arguments),t.options.clones.highlightActiveClones&&s.isClone()&&e.each(s.getCloneList(!0),function(t,i){e(i[o]).toggleClass("fancytree-active-clone",n!==!1)}),r}}),e.ui.fancytree}),function(e){e(jQuery)}(function(e){"use strict";function t(e){return 0===e?"":e>0?"+"+e:""+e}function n(t){var n;return t?(n=e.isPlainObject(t)?{over:!!t.over,before:!!t.before,after:!!t.after}:e.isArray(t)?{over:e.inArray("over",t)>=0,before:e.inArray("before",t)>=0,after:e.inArray("after",t)>=0}:{over:t===!0||"over"===t,before:t===!0||"before"===t,after:t===!0||"after"===t},0===Object.keys(n).length?!1:n):!1}function i(t,n){var i,r,o,s=t.options.dnd5,a=t.$scrollParent[0],l=s.scrollSensitivity,d=s.scrollSpeed,c=0;return a!==document&&"HTML"!==a.tagName?(i=t.$scrollParent.offset(),
r=a.scrollTop,i.top+a.offsetHeight-n.pageY<l?(o=a.scrollHeight-t.$scrollParent.innerHeight()-r,o>0&&(a.scrollTop=c=r+d)):r>0&&n.pageY-i.top<l&&(a.scrollTop=c=r-d)):(r=e(document).scrollTop(),r>0&&n.pageY-r<l?(c=r-d,e(document).scrollTop(c)):e(window).height()-(n.pageY-r)<l&&(c=r+d,e(document).scrollTop(c))),c&&t.debug("autoScroll: "+c+"px"),c}function r(n,r){if(r.options.dnd5.scroll&&i(r.tree,n),!r.node)return r.tree.warn("Ignore dragover for non-node"),m;var s,a,p,y=null,b=r.tree,x=b.options,C=x.dnd5,_=r.node,k=r.otherNode,w="center",N=e(_.span),S=N.find("span.fancytree-title");if(v===!1)return b.info("Ignore dragover, since dragenter returned false"),!1;if("string"==typeof v?e.error("assert failed: dragenter returned string"):(a=N.offset(),p=(n.pageY-a.top)/N.height(),v.after&&p>.75?y="after":!v.over&&v.after&&p>.5?y="after":v.before&&.25>=p?y="before":!v.over&&v.before&&.5>=p?y="before":v.over&&(y="over"),C.preventVoidMoves&&(_===k?(_.debug("drop over source node prevented"),y=null):"before"===y&&k&&_===k.getNextSibling()?(_.debug("drop after source node prevented"),y=null):"after"===y&&k&&_===k.getPrevSibling()?(_.debug("drop before source node prevented"),y=null):"over"===y&&k&&k.parent===_&&k.isLastSibling()&&(_.debug("drop last child over own parent prevented"),y=null))),r.hitMode=y,y&&C.dragOver&&(C.dragOver(_,r),y=r.hitMode),m=y,"after"===y||"before"===y||"over"===y){switch(s=C.dropMarkerOffsetX||0,y){case"before":w="top",s+=C.dropMarkerInsertOffsetX||0;break;case"after":w="bottom",s+=C.dropMarkerInsertOffsetX||0}g.toggleClass(d,"after"===y).toggleClass(u,"over"===y).toggleClass(c,"before"===y).show().position(o.fixPositionOptions({my:"left"+t(s)+" center",at:"left "+w,of:S}))}else g.hide();return e(_.span).toggleClass(f,"after"===y||"before"===y||"over"===y).toggleClass(d,"after"===y).toggleClass(c,"before"===y).toggleClass(l,"over"===y).toggleClass(h,y===!1),y}var o=e.ui.fancytree,s="fancytree-drag-source",a="fancytree-drag-remove",l="fancytree-drop-accept",d="fancytree-drop-after",c="fancytree-drop-before",u="fancytree-drop-over",h="fancytree-drop-reject",f="fancytree-drop-target",p="application/x-fancytree-node",g=null,y=null,v=null,m=null;return e.ui.fancytree.registerExtension({name:"dnd5",version:"2.27.0",options:{autoExpandMS:1500,setTextTypeJson:!1,preventForeignNodes:!1,preventNonNodes:!1,preventRecursiveMoves:!0,preventVoidMoves:!0,scroll:!0,scrollSensitivity:20,scrollSpeed:5,dropMarkerOffsetX:-24,dropMarkerInsertOffsetX:-16,dragStart:null,dragDrag:e.noop,dragEnd:e.noop,dragEnter:null,dragOver:e.noop,dragExpand:e.noop,dragDrop:e.noop,dragLeave:e.noop},treeInit:function(t){var i,d=t.tree,c=t.options,f=c.glyph||null,b=c.dnd5,x=o.getNode;e.inArray("dnd",c.extensions)>=0&&e.error("Extensions 'dnd' and 'dnd5' are mutually exclusive."),b.dragStop&&e.error("dragStop is not used by ext-dnd5. Use dragEnd instead."),b.dragStart&&o.overrideMethod(t.options,"createNode",function(e,t){this._super.apply(this,arguments),t.node.span.draggable=!0}),this._superApply(arguments),this.$container.addClass("fancytree-ext-dnd5"),i=e("<span>").appendTo(this.$container),this.$scrollParent=i.scrollParent(),i.remove(),g=e("#fancytree-drop-marker"),g.length||(g=e("<div id='fancytree-drop-marker'></div>").hide().css({"z-index":1e3,"pointer-events":"none"}).prependTo("body"),f&&o.setSpanIcon(g[0],f.map._addClass,f.map.dropMarker)),b.dragStart&&d.$container.on("dragstart drag dragend",function(t){var n,i=x(t),r=t.dataTransfer||t.originalEvent.dataTransfer,o="move"===r.dropEffect,l=i?e(i.span):null,c={node:i,tree:d,options:d.options,originalEvent:t,dataTransfer:r,isCancelled:void 0};switch(t.type){case"dragstart":e(i.span).addClass(s),y=i,n=JSON.stringify(i.toDict());try{r.setData(p,n),r.setData("text/html",e(i.span).html()),r.setData("text/plain",i.title)}catch(u){d.warn("Could not set data (IE only accepts 'text') - "+u)}return b.setTextTypeJson?r.setData("text",n):r.setData("text",i.title),r.effectAllowed="all",r.setDragImage&&r.setDragImage(e(i.span).find(".fancytree-title")[0],-10,-10),b.dragStart(i,c)!==!1;case"drag":l.toggleClass(a,o),b.dragDrag(i,c);break;case"dragend":e(i.span).removeClass(s+" "+a),y=null,v=null,c.isCancelled="none"===r.dropEffect,g.hide(),b.dragEnd(i,c)}}),b.dragEnter&&d.$container.on("dragenter dragover dragleave drop",function(t){var i,o,s,a,c=null,f=x(t),C=t.dataTransfer||t.originalEvent.dataTransfer,_={node:f,tree:d,options:d.options,hitMode:v,originalEvent:t,dataTransfer:C,otherNode:y||null,otherNodeData:null,dropEffect:void 0,isCancelled:void 0};switch(t.type){case"dragenter":if(!f){d.debug("Ignore non-node "+t.type+": "+t.target.tagName+"."+t.target.className),v=!1;break}if(e(f.span).addClass(u).removeClass(l+" "+h),b.preventNonNodes&&!o){f.debug("Reject dropping a non-node"),v=!1;break}if(b.preventForeignNodes&&(!y||y.tree!==f.tree)){f.debug("Reject dropping a foreign node"),v=!1;break}setTimeout(function(){!b.autoExpandMS||f.hasChildren()===!1||f.expanded||b.dragExpand&&b.dragExpand(f,_)===!1||f.scheduleAction("expand",b.autoExpandMS)},0),g.show(),b.preventRecursiveMoves&&f.isDescendantOf(_.otherNode)?a=!1:(s=b.dragEnter(f,_),a=n(s)),v=a,c=a&&(a.over||a.before||a.after);break;case"dragover":m=r(t,_),c=!!m;break;case"dragleave":if(!f){d.debug("Ignore non-node "+t.type+": "+t.target.tagName+"."+t.target.className);break}if(!e(f.span).hasClass(u)){f.debug("Ignore dragleave (multi)");break}e(f.span).removeClass(u+" "+l+" "+h),f.scheduleAction("cancel"),b.dragLeave(f,_),g.hide();break;case"drop":if(e.inArray(p,C.types)>=0&&(o=C.getData(p),d.info(t.type+": getData('application/x-fancytree-node'): '"+o+"'")),o||(o=C.getData("text"),d.info(t.type+": getData('text'): '"+o+"'")),o)try{i=JSON.parse(o),void 0!==i.title&&(_.otherNodeData=i)}catch(k){}d.debug(t.type+": nodeData: '"+o+"', otherNodeData: ",_.otherNodeData),e(f.span).removeClass(u+" "+l+" "+h),g.hide(),_.hitMode=m,_.dropEffect=C.dropEffect,_.isCancelled="none"===_.dropEffect,b.dragDrop(f,_),t.preventDefault()}return c?(t.preventDefault(),!1):void 0})}}),e.ui.fancytree}),function(e){e(jQuery)}(function(e){"use strict";var t=/Mac/.test(navigator.platform),n=e.ui.fancytree.escapeHtml,i=e.ui.fancytree.unescapeHtml;return e.ui.fancytree._FancytreeNodeClass.prototype.editStart=function(){var t,n=this,r=this.tree,o=r.ext.edit,s=r.options.edit,a=e(".fancytree-title",n.span),l={node:n,tree:r,options:r.options,isNew:e(n[r.statusClassPropName]).hasClass("fancytree-edit-new"),orgTitle:n.title,input:null,dirty:!1};return s.beforeEdit.call(n,{type:"beforeEdit"},l)===!1?!1:(e.ui.fancytree.assert(!o.currentNode,"recursive edit"),o.currentNode=this,o.eventData=l,r.widget._unbind(),e(document).on("mousedown.fancytree-edit",function(t){e(t.target).hasClass("fancytree-edit-input")||n.editEnd(!0,t)}),t=e("<input />",{"class":"fancytree-edit-input",type:"text",value:r.options.escapeTitles?l.orgTitle:i(l.orgTitle)}),o.eventData.input=t,null!=s.adjustWidthOfs&&t.width(a.width()+s.adjustWidthOfs),null!=s.inputCss&&t.css(s.inputCss),a.html(t),t.focus().change(function(e){t.addClass("fancytree-edit-dirty")}).keydown(function(t){switch(t.which){case e.ui.keyCode.ESCAPE:n.editEnd(!1,t);break;case e.ui.keyCode.ENTER:return n.editEnd(!0,t),!1}t.stopPropagation()}).blur(function(e){return n.editEnd(!0,e)}),void s.edit.call(n,{type:"edit"},l))},e.ui.fancytree._FancytreeNodeClass.prototype.editEnd=function(t,i){var r,o=this,s=this.tree,a=s.ext.edit,l=a.eventData,d=s.options.edit,c=e(".fancytree-title",o.span),u=c.find("input.fancytree-edit-input");return d.trim&&u.val(e.trim(u.val())),r=u.val(),l.dirty=r!==o.title,l.originalEvent=i,t===!1?l.save=!1:l.isNew?l.save=""!==r:l.save=l.dirty&&""!==r,d.beforeClose.call(o,{type:"beforeClose"},l)===!1?!1:l.save&&d.save.call(o,{type:"save"},l)===!1?!1:(u.removeClass("fancytree-edit-dirty").off(),e(document).off(".fancytree-edit"),l.save?(o.setTitle(s.options.escapeTitles?r:n(r)),o.setFocus()):l.isNew?(o.remove(),o=l.node=null,a.relatedNode.setFocus()):(o.renderTitle(),o.setFocus()),a.eventData=null,a.currentNode=null,a.relatedNode=null,s.widget._bind(),e(s.$container).focus(),l.input=null,d.close.call(o,{type:"close"},l),!0)},e.ui.fancytree._FancytreeNodeClass.prototype.editCreateNode=function(t,n){var i,r=this.tree,o=this;return t=t||"child",null==n?n={title:""}:"string"==typeof n?n={title:n}:e.ui.fancytree.assert(e.isPlainObject(n)),"child"!==t||this.isExpanded()||this.hasChildren()===!1?(i=this.addNode(n,t),i.match=!0,e(i[r.statusClassPropName]).removeClass("fancytree-hide").addClass("fancytree-match"),void i.makeVisible().done(function(){e(i[r.statusClassPropName]).addClass("fancytree-edit-new"),o.tree.ext.edit.relatedNode=o,i.editStart()})):void this.setExpanded().done(function(){o.editCreateNode(t,n)})},e.ui.fancytree._FancytreeClass.prototype.isEditing=function(){return this.ext.edit?this.ext.edit.currentNode:null},e.ui.fancytree._FancytreeNodeClass.prototype.isEditing=function(){return this.tree.ext.edit?this.tree.ext.edit.currentNode===this:!1},e.ui.fancytree.registerExtension({name:"edit",version:"2.27.0",options:{adjustWidthOfs:4,allowEmpty:!1,inputCss:{minWidth:"3em"},triggerStart:["f2","mac+enter","shift+click"],trim:!0,beforeClose:e.noop,beforeEdit:e.noop,close:e.noop,edit:e.noop,save:e.noop},currentNode:null,treeInit:function(e){this._superApply(arguments),this.$container.addClass("fancytree-ext-edit")},nodeClick:function(t){return e.inArray("shift+click",t.options.edit.triggerStart)>=0&&t.originalEvent.shiftKey?(t.node.editStart(),!1):e.inArray("clickActive",t.options.edit.triggerStart)>=0&&t.node.isActive()&&!t.node.isEditing()&&e(t.originalEvent.target).hasClass("fancytree-title")?(t.node.editStart(),!1):this._superApply(arguments)},nodeDblclick:function(t){return e.inArray("dblclick",t.options.edit.triggerStart)>=0?(t.node.editStart(),!1):this._superApply(arguments)},nodeKeydown:function(n){switch(n.originalEvent.which){case 113:if(e.inArray("f2",n.options.edit.triggerStart)>=0)return n.node.editStart(),!1;break;case e.ui.keyCode.ENTER:if(e.inArray("mac+enter",n.options.edit.triggerStart)>=0&&t)return n.node.editStart(),!1}return this._superApply(arguments)}}),e.ui.fancytree}),function(e){e(jQuery)}(function(e){"use strict";function t(e){return(e+"").replace(/([.?*+\^\$\[\]\\(){}|-])/g,"\\$1")}function n(t){return t.indexOf(">")>=0?e("<div/>").html(t).text():t}var i="__not_found__",r=e.ui.fancytree.escapeHtml;return e.ui.fancytree._FancytreeClass.prototype._applyFilterImpl=function(o,s,a){var l,d,c,u,h,f=0,p=this.options,g=p.escapeTitles,y=p.autoCollapse,v=e.extend({},p.filter,a),m="hide"===v.mode,b=!!v.leavesOnly&&!s;if("string"==typeof o){if(""===o)return this.warn("Fancytree passing an empty string as a filter is handled as clearFilter()."),void this.clearFilter();l=v.fuzzy?o.split("").reduce(function(e,t){return e+"[^"+t+"]*"+t}):t(o),c=new RegExp(".*"+l+".*","i"),u=new RegExp(t(o),"gi"),o=function(e){var t=g?e.title:n(e.title),i=!!c.test(t);return i&&v.highlight&&(g?(h=t.replace(u,function(e){return""+e+""}),e.titleWithHighlight=r(h).replace(/\uFFF7/g,"<mark>").replace(/\uFFF8/g,"</mark>")):e.titleWithHighlight=t.replace(u,function(e){return"<mark>"+e+"</mark>"})),i}}return this.enableFilter=!0,this.lastFilterArgs=arguments,this.$div.addClass("fancytree-ext-filter"),m?this.$div.addClass("fancytree-ext-filter-hide"):this.$div.addClass("fancytree-ext-filter-dimm"),this.$div.toggleClass("fancytree-ext-filter-hide-expanders",!!v.hideExpanders),this.visit(function(e){delete e.match,delete e.titleWithHighlight,e.subMatchCount=0}),d=this.getRootNode()._findDirectChild(i),d&&d.remove(),p.autoCollapse=!1,this.visit(function(e){if(!b||null==e.children){var t=o(e),n=!1;if("skip"===t)return e.visit(function(e){e.match=!1},!0),"skip";t||!s&&"branch"!==t||!e.parent.match||(t=!0,n=!0),t&&(f++,e.match=!0,e.visitParents(function(e){e.subMatchCount+=1,!v.autoExpand||n||e.expanded||(e.setExpanded(!0,{noAnimation:!0,noEvents:!0,scrollIntoView:!1}),e._filterAutoExpanded=!0)}))}}),p.autoCollapse=y,0===f&&v.nodata&&m&&(d=v.nodata,e.isFunction(d)&&(d=d()),d===!0?d={}:"string"==typeof d&&(d={title:d}),d=e.extend({statusNodeType:"nodata",key:i,title:this.options.strings.noData},d),this.getRootNode().addNode(d).match=!0),this.render(),f},e.ui.fancytree._FancytreeClass.prototype.filterNodes=function(e,t){return"boolean"==typeof t&&(t={leavesOnly:t},this.warn("Fancytree.filterNodes() leavesOnly option is deprecated since 2.9.0 / 2015-04-19. Use opts.leavesOnly instead.")),this._applyFilterImpl(e,!1,t)},e.ui.fancytree._FancytreeClass.prototype.applyFilter=function(e){return this.warn("Fancytree.applyFilter() is deprecated since 2.1.0 / 2014-05-29. Use .filterNodes() instead."),this.filterNodes.apply(this,arguments)},e.ui.fancytree._FancytreeClass.prototype.filterBranches=function(e,t){return this._applyFilterImpl(e,!0,t)},e.ui.fancytree._FancytreeClass.prototype.clearFilter=function(){var t,n=this.getRootNode()._findDirectChild(i),r=this.options.escapeTitles,o=this.options.enhanceTitle;n&&n.remove(),this.visit(function(n){n.match&&n.span&&(t=e(n.span).find(">span.fancytree-title"),r?t.text(n.title):t.html(n.title),o&&o({type:"enhanceTitle"},{node:n,$title:t})),delete n.match,delete n.subMatchCount,delete n.titleWithHighlight,n.$subMatchBadge&&(n.$subMatchBadge.remove(),delete n.$subMatchBadge),n._filterAutoExpanded&&n.expanded&&n.setExpanded(!1,{noAnimation:!0,noEvents:!0,scrollIntoView:!1}),delete n._filterAutoExpanded}),this.enableFilter=!1,this.lastFilterArgs=null,this.$div.removeClass("fancytree-ext-filter fancytree-ext-filter-dimm fancytree-ext-filter-hide"),this.render()},e.ui.fancytree._FancytreeClass.prototype.isFilterActive=function(){return!!this.enableFilter},e.ui.fancytree._FancytreeNodeClass.prototype.isMatched=function(){return!(this.tree.enableFilter&&!this.match)},e.ui.fancytree.registerExtension({name:"filter",version:"2.27.0",options:{autoApply:!0,autoExpand:!1,counter:!0,fuzzy:!1,hideExpandedCounter:!0,hideExpanders:!1,highlight:!0,leavesOnly:!1,nodata:!0,mode:"dimm"},nodeLoadChildren:function(e,t){return this._superApply(arguments).done(function(){e.tree.enableFilter&&e.tree.lastFilterArgs&&e.options.filter.autoApply&&e.tree._applyFilterImpl.apply(e.tree,e.tree.lastFilterArgs)})},nodeSetExpanded:function(e,t,n){return delete e.node._filterAutoExpanded,!t&&e.options.filter.hideExpandedCounter&&e.node.$subMatchBadge&&e.node.$subMatchBadge.show(),this._superApply(arguments)},nodeRenderStatus:function(t){var n,i=t.node,r=t.tree,o=t.options.filter,s=e(i.span).find("span.fancytree-title"),a=e(i[r.statusClassPropName]),l=t.options.enhanceTitle,d=t.options.escapeTitles;return n=this._super(t),a.length&&r.enableFilter?(a.toggleClass("fancytree-match",!!i.match).toggleClass("fancytree-submatch",!!i.subMatchCount).toggleClass("fancytree-hide",!(i.match||i.subMatchCount)),!o.counter||!i.subMatchCount||i.isExpanded()&&o.hideExpandedCounter?i.$subMatchBadge&&i.$subMatchBadge.hide():(i.$subMatchBadge||(i.$subMatchBadge=e("<span class='fancytree-childcounter'/>"),e("span.fancytree-icon, span.fancytree-custom-icon",i.span).append(i.$subMatchBadge)),i.$subMatchBadge.show().text(i.subMatchCount)),!i.span||i.isEditing&&i.isEditing.call(i)||(i.titleWithHighlight?s.html(i.titleWithHighlight):d?s.text(i.title):s.html(i.title),l&&l({type:"enhanceTitle"},{node:i,$title:s})),n):n}}),e.ui.fancytree}),function(e){e(jQuery)}(function(e){"use strict";function t(t,n,i,r){var o=i.map,s=o[r],a=e(t),l=n+" "+(o._addClass||"");"string"==typeof s?a.attr("class",l+" "+s):(s.text&&a.text(""+s.text),a.attr("class",l+" "+(s.addClass||"")))}var n=e.ui.fancytree,i={awesome3:{_addClass:"",checkbox:"icon-check-empty",checkboxSelected:"icon-check",checkboxUnknown:"icon-check icon-muted",dragHelper:"icon-caret-right",dropMarker:"icon-caret-right",error:"icon-exclamation-sign",expanderClosed:"icon-caret-right",expanderLazy:"icon-angle-right",expanderOpen:"icon-caret-down",loading:"icon-refresh icon-spin",nodata:"icon-meh",noExpander:"",radio:"icon-circle-blank",radioSelected:"icon-circle",doc:"icon-file-alt",docOpen:"icon-file-alt",folder:"icon-folder-close-alt",folderOpen:"icon-folder-open-alt"},awesome4:{_addClass:"fa",checkbox:"fa-square-o",checkboxSelected:"fa-check-square-o",checkboxUnknown:"fa-square",dragHelper:"fa-arrow-right",dropMarker:"fa-long-arrow-right",error:"fa-warning",expanderClosed:"fa-caret-right",expanderLazy:"fa-angle-right",expanderOpen:"fa-caret-down",loading:"fa-spinner fa-pulse",nodata:"fa-meh-o",noExpander:"",radio:"fa-circle-thin",radioSelected:"fa-circle",doc:"fa-file-o",docOpen:"fa-file-o",folder:"fa-folder-o",folderOpen:"fa-folder-open-o"},bootstrap3:{_addClass:"glyphicon",checkbox:"glyphicon-unchecked",checkboxSelected:"glyphicon-check",checkboxUnknown:"glyphicon-expand",dragHelper:"glyphicon-play",dropMarker:"glyphicon-arrow-right",error:"glyphicon-warning-sign",expanderClosed:"glyphicon-menu-right",expanderLazy:"glyphicon-menu-right",expanderOpen:"glyphicon-menu-down",loading:"glyphicon-refresh glyphicon-spin",nodata:"glyphicon-info-sign",noExpander:"",radio:"glyphicon-remove-circle",radioSelected:"glyphicon-ok-circle",doc:"glyphicon-file",docOpen:"glyphicon-file",folder:"glyphicon-folder-close",folderOpen:"glyphicon-folder-open"},material:{_addClass:"material-icons",checkbox:{text:"check_box_outline_blank"},checkboxSelected:{text:"check_box"},checkboxUnknown:{text:"indeterminate_check_box"},dragHelper:{text:"play_arrow"},dropMarker:{text:"arrow-forward"},error:{text:"warning"},expanderClosed:{text:"chevron_right"},expanderLazy:{text:"last_page"},expanderOpen:{text:"expand_more"},loading:{text:"autorenew",addClass:"glyphicon-spin"},nodata:{text:"info"},noExpander:{text:""},radio:{text:"radio_button_unchecked"},radioSelected:{text:"radio_button_checked"},doc:{text:"insert_drive_file"},docOpen:{text:"insert_drive_file"},folder:{text:"folder"},folderOpen:{text:"folder_open"}}};return e.ui.fancytree.registerExtension({name:"glyph",version:"2.27.0",options:{preset:null,map:{}},treeInit:function(t){var r=t.tree,o=t.options.glyph;o.preset?(n.assert(!!i[o.preset],"Invalid value for `options.glyph.preset`: "+o.preset),o.map=e.extend({},i[o.preset],o.map)):r.warn("ext-glyph: missing `preset` option."),this._superApply(arguments),r.$container.addClass("fancytree-ext-glyph")},nodeRenderStatus:function(i){var r,o,s,a,l=i.node,d=e(l.span),c=i.options.glyph;return s=this._super(i),l.isRoot()?s:(a=d.children("span.fancytree-expander").get(0),a&&(o=l.expanded&&l.hasChildren()?"expanderOpen":l.isUndefined()?"expanderLazy":l.hasChildren()?"expanderClosed":"noExpander",t(a,"fancytree-expander",c,o)),a=l.tr?e("td",l.tr).find("span.fancytree-checkbox").get(0):d.children("span.fancytree-checkbox").get(0),a&&(r=n.evalOption("checkbox",l,l,c,!1),l.parent&&l.parent.radiogroup||"radio"===r?(o=l.selected?"radioSelected":"radio",t(a,"fancytree-checkbox fancytree-radio",c,o)):(o=l.selected?"checkboxSelected":l.partsel?"checkboxUnknown":"checkbox",t(a,"fancytree-checkbox",c,o))),a=d.children("span.fancytree-icon").get(0),a&&(o=l.statusNodeType?l.statusNodeType:l.folder?l.expanded&&l.hasChildren()?"folderOpen":"folder":l.expanded?"docOpen":"doc",t(a,"fancytree-icon",c,o)),s)},nodeSetStatus:function(n,i,r,o){var s,a,l=n.options.glyph,d=n.node;return s=this._superApply(arguments),("error"===i||"loading"===i||"nodata"===i)&&(d.parent?(a=e("span.fancytree-expander",d.span).get(0),a&&t(a,"fancytree-expander",l,i)):(a=e(".fancytree-statusnode-"+i,d[this.nodeContainerAttrName]).find("span.fancytree-icon").get(0),a&&t(a,"fancytree-icon",l,i))),s}}),e.ui.fancytree}),function(e){e(jQuery)}(function(e){"use strict";function t(t,n){var i,r=n.get(0),o=0;return t.children().each(function(){return this===r?!1:(i=e(this).prop("colspan"),void(o+=i?i:1))}),o}function n(t,n){var i,r=null,o=0;return t.children().each(function(){return o>=n?(r=e(this),!1):(i=e(this).prop("colspan"),void(o+=i?i:1))}),r}function i(e,i){var o,s,a=e.closest("td"),l=null;switch(i){case r.LEFT:l=a.prev();break;case r.RIGHT:l=a.next();break;case r.UP:case r.DOWN:for(o=a.parent(),s=t(o,a);;){if(o=i===r.UP?o.prev():o.next(),!o.length)break;if(!o.is(":hidden")&&(l=n(o,s),l&&l.find(":input,a").length))break}}return l}var r=e.ui.keyCode,o={text:[r.UP,r.DOWN],checkbox:[r.UP,r.DOWN,r.LEFT,r.RIGHT],link:[r.UP,r.DOWN,r.LEFT,r.RIGHT],radiobutton:[r.UP,r.DOWN,r.LEFT,r.RIGHT],"select-one":[r.LEFT,r.RIGHT],"select-multiple":[r.LEFT,r.RIGHT]};return e.ui.fancytree.registerExtension({name:"gridnav",version:"2.27.0",options:{autofocusInput:!1,handleCursorKeys:!0},treeInit:function(t){this._requireExtension("table",!0,!0),this._superApply(arguments),this.$container.addClass("fancytree-ext-gridnav"),this.$container.on("focusin",function(n){var i,r=e.ui.fancytree.getNode(n.target);r&&!r.isActive()&&(i=t.tree._makeHookContext(r,n),t.tree._callHook("nodeSetActive",i,!0))})},nodeSetActive:function(t,n,i){var r,o=t.options.gridnav,s=t.node,a=t.originalEvent||{},l=e(a.target).is(":input");n=n!==!1,this._superApply(arguments),n&&(t.options.titlesTabbable?(l||(e(s.span).find("span.fancytree-title").focus(),s.setFocus()),t.tree.$container.attr("tabindex","-1")):o.autofocusInput&&!l&&(r=e(s.tr||s.span),r.find(":input:enabled:first").focus()))},nodeKeydown:function(t){var n,r,s,a=t.options.gridnav,l=t.originalEvent,d=e(l.target);return d.is(":input:enabled")?n=d.prop("type"):d.is("a")&&(n="link"),n&&a.handleCursorKeys?(r=o[n],r&&e.inArray(l.which,r)>=0&&(s=i(d,l.which),s&&s.length)?(s.find(":input:enabled,a").focus(),!1):!0):this._superApply(arguments)}}),e.ui.fancytree}),function(e){e(jQuery)}(function(e){"use strict";function t(n,i,r,o,s){var l,d,c,u,h=!1,f=n.options.persist.expandOpts,p=[],g=[];for(r=r||[],s=s||e.Deferred(),l=0,c=r.length;c>l;l++)d=r[l],u=n.getNodeByKey(d),u?o&&u.isUndefined()?(h=!0,n.debug("_loadLazyNodes: "+u+" is lazy: loading..."),"expand"===o?p.push(u.setExpanded(!0,f)):p.push(u.load())):(n.debug("_loadLazyNodes: "+u+" already loaded."),u.setExpanded(!0,f)):(g.push(d),n.debug("_loadLazyNodes: "+u+" was not yet found."));return e.when.apply(e,p).always(function(){if(h&&g.length>0)t(n,i,g,o,s);else{if(g.length)for(n.warn("_loadLazyNodes: could not load those keys: ",g),l=0,c=g.length;c>l;l++)d=r[l],i._appendKey(a,r[l],!1);s.resolve()}}),s}var n=null,i=window.localStorage?{get:function(e){return window.localStorage.getItem(e)},set:function(e,t){window.localStorage.setItem(e,t)},remove:function(e){window.localStorage.removeItem(e)}}:null,r=window.sessionStorage?{get:function(e){return window.sessionStorage.getItem(e)},set:function(e,t){window.sessionStorage.setItem(e,t)},remove:function(e){window.sessionStorage.removeItem(e)}}:null,o=e.ui.fancytree.assert,s="active",a="expanded",l="focus",d="selected";return"function"==typeof Cookies?n={get:Cookies.get,set:function(e,t){Cookies.set(e,t,this.options.persist.cookie)},remove:Cookies.remove}:e&&"function"==typeof e.cookie&&(n={get:e.cookie,set:function(t,n){e.cookie.set(t,n,this.options.persist.cookie)},remove:e.removeCookie}),e.ui.fancytree._FancytreeClass.prototype.clearData=function(e){var t=this.ext.persist,n=t.cookiePrefix;e=e||"active expanded focus selected",e.indexOf(s)>=0&&t._data(n+s,null),e.indexOf(a)>=0&&t._data(n+a,null),e.indexOf(l)>=0&&t._data(n+l,null),e.indexOf(d)>=0&&t._data(n+d,null)},e.ui.fancytree._FancytreeClass.prototype.clearCookies=function(e){return this.warn("'tree.clearCookies()' is deprecated since v2.27.0: use 'clearData()' instead."),this.clearData(e)},e.ui.fancytree._FancytreeClass.prototype.getPersistData=function(){var e=this.ext.persist,t=e.cookiePrefix,n=e.cookieDelimiter,i={};return i[s]=e._data(t+s),i[a]=(e._data(t+a)||"").split(n),i[d]=(e._data(t+d)||"").split(n),i[l]=e._data(t+l),i},e.ui.fancytree.registerExtension({name:"persist",version:"2.27.0",options:{cookieDelimiter:"~",cookiePrefix:void 0,cookie:{raw:!1,expires:"",path:"",domain:"",secure:!1},expandLazy:!1,expandOpts:void 0,fireActivate:!0,overrideSource:!0,store:"auto",types:"active expanded focus selected"},_data:function(e,t){var n=this._local.store;return void 0===t?n.get.call(this,e):void(null===t?n.remove.call(this,e):n.set.call(this,e,t))},_appendKey:function(t,n,i){n=""+n;var r=this._local,o=this.options.persist,s=o.cookieDelimiter,a=r.cookiePrefix+t,l=r._data(a),d=l?l.split(s):[],c=e.inArray(n,d);c>=0&&d.splice(c,1),i&&d.push(n),r._data(a,d.join(s))},treeInit:function(c){var u=c.tree,h=c.options,f=this._local,p=this.options.persist;return f.cookiePrefix=p.cookiePrefix||"fancytree-"+u._id+"-",f.storeActive=p.types.indexOf(s)>=0,f.storeExpanded=p.types.indexOf(a)>=0,f.storeSelected=p.types.indexOf(d)>=0,f.storeFocus=p.types.indexOf(l)>=0,f.store=null,"auto"===p.store&&(p.store=i?"local":"cookie"),e.isPlainObject(p.store)?f.store=p.store:"cookie"===p.store?f.store=n:"local"===p.store?f.store="local"===p.store?i:r:"session"===p.store&&(f.store="local"===p.store?i:r),o(f.store,"Need a valid store."),u.$div.on("fancytreeinit",function(n){if(u._triggerTreeEvent("beforeRestore",null,{})!==!1){var i,r,o,c,g,y=f._data(f.cookiePrefix+l),v=p.fireActivate===!1;i=f._data(f.cookiePrefix+a),c=i&&i.split(p.cookieDelimiter),r=f.storeExpanded?t(u,f,c,p.expandLazy?"expand":!1,null):(new e.Deferred).resolve(),r.done(function(){if(f.storeSelected){if(i=f._data(f.cookiePrefix+d))for(c=i.split(p.cookieDelimiter),o=0;o<c.length;o++)g=u.getNodeByKey(c[o]),g?(void 0===g.selected||p.overrideSource&&g.selected===!1)&&(g.selected=!0,g.renderStatus()):f._appendKey(d,c[o],!1);3===u.options.selectMode&&u.visit(function(e){return e.selected?(e.fixSelection3AfterClick(),"skip"):void 0})}f.storeActive&&(i=f._data(f.cookiePrefix+s),!i||!h.persist.overrideSource&&u.activeNode||(g=u.getNodeByKey(i),g&&(g.debug("persist: set active",i),g.setActive(!0,{noFocus:!0,noEvents:v})))),f.storeFocus&&y&&(g=u.getNodeByKey(y),g&&(u.options.titlesTabbable?e(g.span).find(".fancytree-title").focus():e(u.$container).focus())),u._triggerTreeEvent("restore",null,{})})}}),this._superApply(arguments)},nodeSetActive:function(e,t,n){var i,r=this._local;return t=t!==!1,i=this._superApply(arguments),r.storeActive&&r._data(r.cookiePrefix+s,this.activeNode?this.activeNode.key:null),i},nodeSetExpanded:function(e,t,n){var i,r=e.node,o=this._local;return t=t!==!1,i=this._superApply(arguments),o.storeExpanded&&o._appendKey(a,r.key,t),i},nodeSetFocus:function(e,t){var n,i=this._local;return t=t!==!1,n=this._superApply(arguments),i.storeFocus&&i._data(i.cookiePrefix+l,this.focusNode?this.focusNode.key:null),n},nodeSetSelected:function(t,n,i){var r,o,s=t.tree,a=t.node,l=this._local;return n=n!==!1,r=this._superApply(arguments),l.storeSelected&&(3===s.options.selectMode?(o=e.map(s.getSelectedNodes(!0),function(e){return e.key}),o=o.join(t.options.persist.cookieDelimiter),l._data(l.cookiePrefix+d,o)):l._appendKey(d,a.key,a.selected)),r}}),e.ui.fancytree}),function(e){e(jQuery)}(function(e){"use strict";function t(t,n){n=n||"",t||e.error("Assertion failed "+n)}function n(e,t){e.insertBefore(t,e.firstChild)}function i(e,t){e.parentNode.insertBefore(t,e.nextSibling)}function r(e,t){e.visit(function(e){var n=e.tr;return n&&(n.style.display=e.hide||!t?"none":""),e.expanded?void 0:"skip"})}function o(n){var i,r,o,s=n.parent,a=s?s.children:null;if(a&&a.length>1&&a[0]!==n)for(i=e.inArray(n,a),o=a[i-1],t(o.tr);o.children&&o.children.length&&(r=o.children[o.children.length-1],r.tr);)o=r;else o=s;return o}return e.ui.fancytree.registerExtension({name:"table",version:"2.27.0",options:{checkboxColumnIdx:null,indentation:16,nodeColumnIdx:0},treeInit:function(n){var i,r,o,s,a,l=n.tree,d=n.options,c=d.table,u=l.widget.element;if(null!=c.customStatus&&(null!=d.renderStatusColumns?e.error("The 'customStatus' option is deprecated since v2.15.0. Use 'renderStatusColumns' only instead."):(l.warn("The 'customStatus' option is deprecated since v2.15.0. Use 'renderStatusColumns' instead."),d.renderStatusColumns=c.customStatus)),d.renderStatusColumns&&d.renderStatusColumns===!0&&(d.renderStatusColumns=d.renderColumns),u.addClass("fancytree-container fancytree-ext-table"),a=u.find(">tbody"),a.length||(u.find(">tr").length&&e.error("Expected table > tbody > tr. If you see this please open an issue."),a=e("<tbody>").appendTo(u)),l.tbody=a[0],r=e("thead >tr:last >th",u).length,s=a.children("tr:first"),s.length)o=s.children("td").length,r&&o!==r&&(l.warn("Column count mismatch between thead ("+r+") and tbody ("+o+"): using tbody."),r=o),s=s.clone();else for(t(r>=1,"Need either <thead> or <tbody> with <td> elements to determine column count."),s=e("<tr />"),i=0;r>i;i++)s.append("<td />");s.find(">td").eq(c.nodeColumnIdx).html("<span class='fancytree-node' />"),d.aria&&(s.attr("role","row"),s.find("td").attr("role","gridcell")),l.rowFragment=document.createDocumentFragment(),l.rowFragment.appendChild(s.get(0)),a.empty(),l.statusClassPropName="tr",l.ariaPropName="tr",this.nodeContainerAttrName="tr",l.$container=u,this._superApply(arguments),e(l.rootNode.ul).remove(),l.rootNode.ul=null,this.$container.attr("tabindex",d.tabindex),d.aria&&l.$container.attr("role","treegrid").attr("aria-readonly",!0)},nodeRemoveChildMarkup:function(t){var n=t.node;n.visit(function(t){t.tr&&(e(t.tr).remove(),t.tr=null)})},nodeRemoveMarkup:function(t){var n=t.node;n.tr&&(e(n.tr).remove(),n.tr=null),this.nodeRemoveChildMarkup(t)},nodeRender:function(s,a,l,d,c){var u,h,f,p,g,y,v,m,b=s.tree,x=s.node,C=s.options,_=!x.parent;if(b._enableUpdate!==!1){if(c||(s.hasCollapsedParents=x.parent&&!x.parent.expanded),!_)if(x.tr&&a&&this.nodeRemoveMarkup(s),x.tr)a?this.nodeRenderTitle(s):this.nodeRenderStatus(s);else{if(s.hasCollapsedParents&&!l)return;g=b.rowFragment.firstChild.cloneNode(!0),y=o(x),t(y),d===!0&&c?g.style.display="none":l&&s.hasCollapsedParents&&(g.style.display="none"),y.tr?i(y.tr,g):(t(!y.parent,"prev. row must have a tr, or be system root"),n(b.tbody,g)),x.tr=g,x.key&&C.generateIds&&(x.tr.id=C.idPrefix+x.key),x.tr.ftnode=x,x.span=e("span.fancytree-node",x.tr).get(0),this.nodeRenderTitle(s),C.createNode&&C.createNode.call(b,{type:"createNode"},s)}if(C.renderNode&&C.renderNode.call(b,{type:"renderNode"},s),u=x.children,u&&(_||l||x.expanded))for(f=0,p=u.length;p>f;f++)m=e.extend({},s,{node:u[f]}),m.hasCollapsedParents=m.hasCollapsedParents||!x.expanded,this.nodeRender(m,a,l,d,!0);u&&!c&&(v=x.tr||null,h=b.tbody.firstChild,x.visit(function(e){if(e.tr){if(e.parent.expanded||"none"===e.tr.style.display||(e.tr.style.display="none",r(e,!1)),e.tr.previousSibling!==v){x.debug("_fixOrder: mismatch at node: "+e);var t=v?v.nextSibling:h;b.tbody.insertBefore(e.tr,t)}v=e.tr}}))}},nodeRenderTitle:function(t,n){var i,r,o=t.node,s=t.options,a=o.isStatusNode();return r=this._super(t,n),o.isRootNode()?r:(s.checkbox&&!a&&null!=s.table.checkboxColumnIdx&&(i=e("span.fancytree-checkbox",o.span),e(o.tr).find("td").eq(+s.table.checkboxColumnIdx).html(i)),this.nodeRenderStatus(t),a?s.renderStatusColumns&&s.renderStatusColumns.call(t.tree,{type:"renderStatusColumns"},t):s.renderColumns&&s.renderColumns.call(t.tree,{type:"renderColumns"},t),r)},nodeRenderStatus:function(t){var n,i=t.node,r=t.options;this._super(t),e(i.tr).removeClass("fancytree-node"),n=(i.getLevel()-1)*r.table.indentation,e(i.span).css({paddingLeft:n+"px"})},nodeSetExpanded:function(t,n,i){function o(e){r(t.node,n),e?n&&t.options.autoScroll&&!i.noAnimation&&t.node.hasChildren()?t.node.getLastChild().scrollIntoView(!0,{topNode:t.node}).always(function(){i.noEvents||t.tree._triggerNodeEvent(n?"expand":"collapse",t),s.resolveWith(t.node)}):(i.noEvents||t.tree._triggerNodeEvent(n?"expand":"collapse",t),s.resolveWith(t.node)):(i.noEvents||t.tree._triggerNodeEvent(n?"expand":"collapse",t),s.rejectWith(t.node))}if(n=n!==!1,t.node.expanded&&n||!t.node.expanded&&!n)return this._superApply(arguments);var s=new e.Deferred,a=e.extend({},i,{noEvents:!0,noAnimation:!0});return i=i||{},this._super(t,n,a).done(function(){o(!0)}).fail(function(){o(!1)}),s.promise()},nodeSetStatus:function(t,n,i,r){if("ok"===n){var o=t.node,s=o.children?o.children[0]:null;
s&&s.isStatusNode()&&e(s.tr).remove()}return this._superApply(arguments)},treeClear:function(e){return this.nodeRemoveChildMarkup(this._makeHookContext(this.rootNode)),this._superApply(arguments)},treeDestroy:function(e){return this.$container.find("tbody").empty(),this.$source&&this.$source.removeClass("ui-helper-hidden"),this._superApply(arguments)}}),e.ui.fancytree}),function(e){e(jQuery)}(function(e){"use strict";return e.ui.fancytree.registerExtension({name:"themeroller",version:"2.27.0",options:{activeClass:"ui-state-active",addClass:"ui-corner-all",focusClass:"ui-state-focus",hoverClass:"ui-state-hover",selectedClass:"ui-state-highlight"},treeInit:function(t){var n=t.widget.element,i=t.options.themeroller;this._superApply(arguments),"TABLE"===n[0].nodeName?(n.addClass("ui-widget ui-corner-all"),n.find(">thead tr").addClass("ui-widget-header"),n.find(">tbody").addClass("ui-widget-conent")):n.addClass("ui-widget ui-widget-content ui-corner-all"),n.delegate(".fancytree-node","mouseenter mouseleave",function(t){var n=e.ui.fancytree.getNode(t.target),r="mouseenter"===t.type;e(n.tr?n.tr:n.span).toggleClass(i.hoverClass+" "+i.addClass,r)})},treeDestroy:function(e){this._superApply(arguments),e.widget.element.removeClass("ui-widget ui-widget-content ui-corner-all")},nodeRenderStatus:function(t){var n={},i=t.node,r=e(i.tr?i.tr:i.span),o=t.options.themeroller;this._super(t),n[o.activeClass]=!1,n[o.focusClass]=!1,n[o.selectedClass]=!1,i.isActive()&&(n[o.activeClass]=!0),i.hasFocus()&&(n[o.focusClass]=!0),i.isSelected()&&!i.isActive()&&(n[o.selectedClass]=!0),r.toggleClass(o.activeClass,n[o.activeClass]),r.toggleClass(o.focusClass,n[o.focusClass]),r.toggleClass(o.selectedClass,n[o.selectedClass]),r.addClass(o.addClass)}}),e.ui.fancytree}),function(e){e(jQuery)}(function(e){"use strict";function t(t,n){t="fancytree-style-"+t;var i=e("#"+t);if(!n)return i.remove(),null;i.length||(i=e("<style />").attr("id",t).addClass("fancytree-style").prop("type","text/css").appendTo("head"));try{i.html(n)}catch(r){i[0].styleSheet.cssText=n}return i}function n(e,t,n,i,r,o){var s,a="#"+e+" span.fancytree-level-",l=[];for(s=0;t>s;s++)l.push(a+(s+1)+" span.fancytree-title { padding-left: "+(s*n+i)+o+"; }");return l.push("#"+e+" div.ui-effects-wrapper ul li span.fancytree-title, #"+e+" li.fancytree-animating span.fancytree-title { padding-left: "+r+o+"; position: static; width: auto; }"),l.join("\n")}var i=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/;return e.ui.fancytree.registerExtension({name:"wide",version:"2.27.0",options:{iconWidth:null,iconSpacing:null,labelSpacing:null,levelOfs:null},treeCreate:function(r){this._superApply(arguments),this.$container.addClass("fancytree-ext-wide");var o,s,a,l,d,c,u=r.options.wide,h=e("<li id='fancytreeTemp'><span class='fancytree-node'><span class='fancytree-icon' /><span class='fancytree-title' /></span><ul />").appendTo(r.tree.$container),f=h.find(".fancytree-icon"),p=h.find("ul"),g=u.iconSpacing||f.css("margin-left"),y=u.iconWidth||f.css("width"),v=u.labelSpacing||"3px",m=u.levelOfs||p.css("padding-left");h.remove(),a=g.match(i)[2],g=parseFloat(g,10),l=v.match(i)[2],v=parseFloat(v,10),d=y.match(i)[2],y=parseFloat(y,10),c=m.match(i)[2],(a!==d||c!==d||l!==d)&&e.error("iconWidth, iconSpacing, and levelOfs must have the same css measure unit"),this._local.measureUnit=d,this._local.levelOfs=parseFloat(m),this._local.lineOfs=(1+(r.options.checkbox?1:0)+(r.options.icon===!1?0:1))*(y+g)+g,this._local.labelOfs=v,this._local.maxDepth=10,o=this.$container.uniqueId().attr("id"),s=n(o,this._local.maxDepth,this._local.levelOfs,this._local.lineOfs,this._local.labelOfs,this._local.measureUnit),t(o,s)},treeDestroy:function(e){return t(this.$container.attr("id"),null),this._superApply(arguments)},nodeRenderStatus:function(i){var r,o,s,a=i.node,l=a.getLevel();return s=this._super(i),l>this._local.maxDepth&&(r=this.$container.attr("id"),this._local.maxDepth*=2,a.debug("Define global ext-wide css up to level "+this._local.maxDepth),o=n(r,this._local.maxDepth,this._local.levelOfs,this._local.lineOfs,this._local.labelSpacing,this._local.measureUnit),t(r,o)),e(a.span).addClass("fancytree-level-"+l),s}}),e.ui.fancytree}),e.ui.fancytree});